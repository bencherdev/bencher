import DieselDebugQuery from "../diesel-debug-query.mdx";
import DieselSql from "../diesel-sql.mdx";

## De l'ORM Ã  la RequÃªte SQL

La premiÃ¨re difficultÃ© Ã  laquelle je me suis heurtÃ© Ã©tait d'extraire la requÃªte SQL de mon code Rust.
J'utilise [Diesel][github diesel] comme mappeur objet-relationnel (ORM) pour Bencher.

> ğŸ° Le Saviez-vous ? Diesel utilise Bencher pour leur [Benchmarking Continu Relatif][relative continuous benchmarking].
> Jetez un Å“il Ã  [la page de performances de Diesel][diesel perf page] !

Diesel crÃ©e des requÃªtes paramÃ©trÃ©es.
Il envoie la requÃªte SQL et ses paramÃ¨tres liÃ©s sÃ©parÃ©ment Ã  la base de donnÃ©es.
C'est-Ã -dire que la substitution est rÃ©alisÃ©e par la base de donnÃ©es.
Par consÃ©quent, Diesel ne peut pas fournir une requÃªte complÃ¨te Ã  l'utilisateur.
La meilleure mÃ©thode que j'ai trouvÃ©e Ã©tait d'utiliser [la fonction `diesel::debug_query`][diesel debug query] pour afficher la requÃªte paramÃ©trÃ©e :

<DieselDebugQuery />

Et ensuite, nettoyer manuellement et paramÃ©trer la requÃªte en SQL valide :

<DieselSql />

Si vous connaissez une meilleure faÃ§on, veuillez me le faire savoir !
C'est ainsi que [le mainteneur du projet l'a suggÃ©rÃ©][stackoverflow diesel] toutefois,
alors j'ai simplement suivi cette voie.
Maintenant que j'avais une requÃªte SQL, j'Ã©tais enfin prÃªt Ã ... lire Ã©normÃ©ment de documentation.

[github diesel]: https://github.com/diesel-rs/diesel
[diesel debug query]: https://docs.rs/diesel/2.1.5/diesel/fn.debug_query.html
[stackoverflow diesel]: https://stackoverflow.com/questions/76467831/ho-to-get-final-sql-query-from-diesel

[relative continuous benchmarking]: /fr/docs/how-to/track-benchmarks/#relative-continuous-benchmarking
[diesel perf page]: /perf/diesel