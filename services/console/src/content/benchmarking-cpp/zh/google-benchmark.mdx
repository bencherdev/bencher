---
title: "pytest-benchmark"
description: "ä½¿ç”¨ pytest-benchmark å¯¹ Python ä»£ç è¿›è¡ŒåŸºå‡†æµ‹è¯•çš„åˆ†æ­¥æŒ‡å—"
heading: "å¦‚ä½•ä½¿ç”¨ pytest-benchmark å¯¹ Python ä»£ç è¿›è¡ŒåŸºå‡†æµ‹è¯•"
published: "2024-10-09T16:30:00Z"
modified: "2024-11-03T08:45:00Z"
sortOrder: 1
---

import Benchmarking from "../../../chunks/benchmarking/zh/benchmarking.mdx";
import FizzBuzzRules from "../../../chunks/benchmarking/zh/fizz-buzz-rules.mdx";
import FizzBuzzPython from "../../../chunks/benchmarking-python/zh/fizz-buzz-python.mdx";
import StepByStepPython from "../../../chunks/benchmarking-python/zh/step-by-step-python.mdx";
import MicroVsMacro from "../../../chunks/benchmarking/zh/micro-vs-macro.mdx";
import BenchmarkingPython from "../../../chunks/benchmarking-python/zh/benchmarking-python.mdx";
import FizzBuzzRefactor from "../../../chunks/benchmarking-python/pytest-benchmark/zh/fizz-buzz-refactor.mdx";
import BenchmarkingFizzBuzz from "../../../chunks/benchmarking-python/pytest-benchmark/zh/benchmarking-fizz-buzz.mdx";
import FizzBuzzFibonacciPython from "../../../chunks/benchmarking-python/zh/fizz-buzz-fibonacci-python.mdx";
import PlayGameCode from "../../../chunks/benchmarking-python/pytest-benchmark/play-game-code.mdx";
import BenchmarkingFizzBuzzFibonacci from "../../../chunks/benchmarking-python/pytest-benchmark/zh/benchmarking-fizz-buzz-fibonacci.mdx";
import FizzBuzzFibonacciOpenPython from "../../../chunks/benchmarking-python/zh/fizz-buzz-fibonacci-open-python.mdx";
import FizzBuzzFibonacciOpenCode from "../../../chunks/benchmarking-python/fizz-buzz-fibonacci-open-code.mdx";
import TheEnd from "../../../chunks/benchmarking/zh/the-end.mdx";
import OnFire from "../../../chunks/benchmarking/zh/on-fire.mdx";
import TestGameOnFireCode from "../../../chunks/benchmarking-python/pytest-benchmark/test-game-on-fire-code.mdx";
import PytestGameOnFireOutputStart from "../../../chunks/benchmarking-python/pytest-benchmark/pytest-game-on-fire-output-start.mdx";
import PytestGameOnFireOutput from "../../../chunks/benchmarking-python/pytest-benchmark/pytest-game-on-fire-output.mdx";
import FizzBuzzFibonacciFix from "../../../chunks/benchmarking-python/pytest-benchmark/zh/fizz-buzz-fibonacci-fix.mdx";
import PytestGameFixOutput from "../../../chunks/benchmarking-python/pytest-benchmark/pytest-game-fix-output.mdx";
import CatchInCi from "../../../chunks/benchmarking/zh/catch-in-ci.mdx";
import CatchInCiOutput from "../../../chunks/benchmarking-python/pytest-benchmark/catch-in-ci-output.mdx";
import CatchInCiPlot from "../../../chunks/benchmarking/zh/catch-in-ci-plot.mdx";
import CatchInCiPlotRustBench from "../../../chunks/benchmarking-rust/catch-in-ci-plot-rust-bench.mdx";
import BencherFooter from "../../../chunks/learn/zh/bencher-footer.mdx";

<Benchmarking />

<FizzBuzzPython />

<StepByStepPython />

<MicroVsMacro />

<BenchmarkingPython />

ä¸¤è€…éƒ½ç”± [Bencheræ”¯æŒ](/zh/docs/explanation/adapters/)ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆé€‰æ‹© `pytest-benchmark`ï¼Ÿ
`pytest-benchmark` èƒ½ä¸ `pytest` æ— ç¼é›†æˆï¼Œ
è€Œ `pytest` æ˜¯ Python ç”Ÿæ€ç³»ç»Ÿä¸­çš„äº‹å®æ ‡å‡†å•å…ƒæµ‹è¯•å·¥å…·ã€‚
æˆ‘å»ºè®®ä½¿ç”¨ `pytest-benchmark` æ¥åŸºå‡†æµ‹è¯•ä»£ç å»¶è¿Ÿï¼Œ
å°¤å…¶æ˜¯å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨ `pytest`ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œ`pytest-benchmark` éå¸¸é€‚åˆæµ‹é‡æŒ‚é’Ÿæ—¶é—´ã€‚

<FizzBuzzRefactor />

<BenchmarkingFizzBuzz />

<FizzBuzzFibonacciPython>
  <PlayGameCode />
</FizzBuzzFibonacciPython>

<BenchmarkingFizzBuzzFibonacci />

<FizzBuzzFibonacciOpenPython>
    <FizzBuzzFibonacciOpenCode />
</FizzBuzzFibonacciOpenPython>

<TheEnd />

<br />

<OnFire />

<TestGameOnFireCode />

- é’ˆå¯¹æ•°å­—ä¸€ç™¾ï¼ˆ`100`ï¼‰çš„æ¸¸æˆè¿›è¡Œå¾®åŸºå‡†æµ‹è¯• `test_game_100`
- é’ˆå¯¹æ•°å­—ä¸€ç™¾ä¸‡ï¼ˆ`1_000_000`ï¼‰çš„æ¸¸æˆè¿›è¡Œå¾®åŸºå‡†æµ‹è¯• `test_game_1_000_000`

å½“æˆ‘è¿è¡Œå®ƒæ—¶ï¼Œæˆ‘å¾—åˆ°äº†è¿™ä¸ªç»“æœï¼š

<PytestGameOnFireOutputStart />

ç­‰ç­‰â€¦â€¦ç­‰ä¸€ä¸‹â€¦â€¦

<PytestGameOnFireOutput />

ä»€ä¹ˆï¼`15.8470 us` x `1,000` åº”è¯¥æ˜¯ `15,847.0 us` è€Œä¸æ˜¯ `571,684.6334 us` ğŸ¤¯
å°½ç®¡æˆ‘çš„æ–æ³¢é‚£å¥‘æ•°åˆ—ä»£ç åœ¨åŠŸèƒ½ä¸Šæ˜¯æ­£ç¡®çš„ï¼Œä½†å…¶ä¸­è‚¯å®šå­˜åœ¨æ€§èƒ½é—®é¢˜ã€‚

<FizzBuzzFibonacciFix />

ç°åœ¨è®©æˆ‘ä»¬é‡æ–°è¿è¡Œè¿™äº›åŸºå‡†æµ‹è¯•ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„è¡¨ç°å¦‚ä½•ï¼š

<PytestGameFixOutput />

å“‡å“¦ï¼æˆ‘ä»¬çš„ `test_game` åŸºå‡†æµ‹è¯•åˆæ¢å¤åˆ°äº†åŸå§‹çš„ FizzBuzz æ°´å¹³é™„è¿‘ã€‚
æˆ‘å¸Œæœ›æˆ‘èƒ½è®°å¾—å½“æ—¶çš„ç¡®åˆ‡å¾—åˆ†ã€‚ä¸è¿‡å·²ç»æ˜¯ä¸‰å‘¨å‰çš„äº‹äº†ã€‚
æˆ‘çš„ç»ˆç«¯å†å²è®°å½•æ— æ³•è¿½æº¯åˆ°é‚£ä¹ˆä¹…ã€‚
è€Œ `pytest-benchmark` ä»…åœ¨æˆ‘ä»¬è¦æ±‚æ—¶æ‰å­˜å‚¨å…¶ç»“æœã€‚
ä½†æˆ‘è®¤ä¸ºå®ƒæ¥è¿‘äº†ï¼

`test_game_100` åŸºå‡†æµ‹è¯•ä¸‹é™äº†è¿‘ 50 å€åˆ° `322.0815 ns`ã€‚
`test_game_1_000_000` åŸºå‡†æµ‹è¯•ä¸‹é™äº†è¶…è¿‡ 500,000 å€ï¼ä» `571,684,633.4 ns` åˆ° `753.1445 ns`ï¼

> ğŸ° è‡³å°‘æˆ‘ä»¬åœ¨æ€§èƒ½é—®é¢˜è¿›å…¥ç”Ÿäº§ç¯å¢ƒä¹‹å‰æŠ“ä½äº†å®ƒâ€¦â€¦å“¦ï¼Œå¯¹äº†ã€‚ç®—äº†...

<CatchInCi />

<CatchInCiOutput />

<CatchInCiPlot />

<CatchInCiPlotRustBench title="å¦‚ä½•ä½¿ç”¨ pytest-benchmark å¯¹ Rust è¿›è¡ŒåŸºå‡†æµ‹è¯•" />

<BencherFooter />