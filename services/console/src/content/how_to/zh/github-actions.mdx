---
title: "GitHub Actions"
description: "åœ¨GitHub Actionsä¸­ä½¿ç”¨Bencherè¿›è¡ŒæŒç»­åŸºå‡†æµ‹è¯•çš„pullè¯·æ±‚"
heading: "å¦‚ä½•åœ¨GitHub Actionsä¸­ä½¿ç”¨Bencher"
sortOrder: 3
---

import GitHubActions1 from "../../../chunks/how_to/github-actions.1.mdx";
import GitHubActions2 from "../../../chunks/how_to/github-actions.2.mdx";
import GitHubActions3 from "../../../chunks/how_to/github-actions.3.mdx";
import GitHubActions4 from "../../../chunks/how_to/github-actions.4.mdx";
import GitHubActions5 from "../../../chunks/how_to/github-actions.5.mdx";

<GitHubActions1 />

1. åˆ›å»ºä¸€ä¸ªGitHub Actions `workflow` æ–‡ä»¶ã€‚ (ä¾‹å¦‚ï¼š`.github/workflows/benchmarks.yml`)
2. åœ¨å¯¹`main`åˆ†æ”¯çš„ `push`äº‹ä»¶ä¸Šè¿è¡Œã€‚æŸ¥çœ‹[GitHub Actions `on` Documentation](https://docs.github.com/zh/actions/using-workflows/workflow-syntax-for-github-actions#on)ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚ä¹Ÿå¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„[Pull Requests](#pull-requests)ã€‚
3. åˆ›å»ºä¸€ä¸ªGitHub Actions `job`ã€‚ (ä¾‹å¦‚: `benchmark_with_bencher`)
4. é¡¹ç›®å¿…é¡»å·²ç»å­˜åœ¨ã€‚è®¾ç½®`--project`æ ‡å¿—æˆ–`BENCHER_PROJECT`ç¯å¢ƒå˜é‡ä¸ºé¡¹ç›®çš„slugæˆ–UUID (ä¾‹å¦‚ï¼š`BENCHER_PROJECT: save-walter-white`)ã€‚
6. å¯é€‰ï¼šè®¾ç½® `--testbed` å‚æ•°æˆ– `BENCHER_TESTBED`ç¯å¢ƒå˜é‡ä¸ºTestbedçš„slugæˆ–UUID. (ä¾‹å¦‚ï¼š`BENCHER_TESTBED: ubuntu-latest`)Testbed å¿…é¡»äº‹å…ˆå­˜åœ¨ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®,é‚£ä¹ˆ`localhost` Testbed ä¼šè¢«é»˜è®¤ä½¿ç”¨ã€‚
7. å¯é€‰ï¼šè®¾ç½® `--adapter` å‚æ•°æˆ–`BENCHER_ADAPTER` ç¯å¢ƒå˜é‡ä¸ºæƒ³è¦çš„adapteråå­—ã€‚ (ä¾‹å¦‚ï¼š`BENCHER_ADAPTER: json`) å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåˆ™ä¼šä½¿ç”¨`magic`é€‚é…å™¨ã€‚æŸ¥çœ‹ [åŸºå‡†æµ‹è¯•é€‚é…å™¨](/zh/docs/explanation/adapters/)ä»¥è·å–å®Œå…¨æ¦‚è§ˆã€‚
8. æ£€å‡ºä½ çš„æºä»£ç  ï¼ˆä¾‹å¦‚ï¼š `uses: actions/checkout@v4`ï¼‰
9. ä½¿ç”¨ [GitHub Action](https://github.com/marketplace/actions/bencher-cli) å®‰è£…Bencher CLIã€‚ï¼ˆä¾‹å¦‚ï¼š`uses: bencherdev/bencher@main`ï¼‰
10. é€šè¿‡ <code><a href="/zh/docs/explanation/bencher-run/">bencher run</a></code> CLIå­å‘½ä»¤ [è·Ÿè¸ªä½ çš„åŸºå‡†æµ‹è¯•](/zh/docs/how-to/track-benchmarks/)ï¼š
    1.  å¯é€‰ï¼šè®¾ç½® `--branch` æ ‡å¿—æˆ–`BENCHER_BRANCH`ç¯å¢ƒå˜é‡ä¸ºBranchçš„slugæˆ–UUIDã€‚ï¼ˆä¾‹å¦‚ï¼š`--branch main`ï¼‰Branchå¿…é¡»äº‹å…ˆå­˜åœ¨ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œé‚£ä¹ˆ`main` Branchä¼šè¢«é»˜è®¤ä½¿ç”¨ã€‚
    2. APIä»¤ç‰Œå¿…é¡»å·²ç»å­˜åœ¨ã€‚å°†`BENCHER_API_TOKEN`æ·»åŠ ä¸º**ä»“åº“**ç§˜å¯†ã€‚ (ä¾‹å¦‚ï¼š `Repo -> Settings -> Secrets and variables -> Actions -> New repository secret`) è®¾ç½®`--token`æ ‡å¿—æˆ–`BENCHER_API_TOKEN`ç¯å¢ƒå˜é‡ä¸ºAPIä»¤ç‰Œã€‚(ä¾‹å¦‚ï¼š`--token ${{ secrets.BENCHER_API_TOKEN }}`)
    3.  å¦‚æœç”ŸæˆAlertï¼Œè®¾ç½®å‘½ä»¤ä¸ºå¤±è´¥ã€‚ï¼ˆä¾‹å¦‚ï¼š`--err`ï¼‰Alertçš„ç”Ÿæˆéœ€è¦äº‹å…ˆå­˜åœ¨ä¸€ä¸ª[é˜ˆå€¼](/zh/docs/explanation/thresholds/)ã€‚
    4.  è¿è¡Œä½ çš„åŸºå‡†æµ‹è¯•å¹¶ä»ç»“æœä¸­ç”ŸæˆæŠ¥å‘Šã€‚ (ä¾‹å¦‚ï¼š`"bencher mock"`)

<br/>

## Pullè¯·æ±‚

ä¸ºäº†åœ¨Pullè¯·æ±‚ä¸­æŠ“å–æ€§èƒ½å›å½’ï¼Œä½ éœ€è¦åœ¨PRsä¸­è¿è¡Œä½ çš„åŸºå‡†æµ‹è¯•ã€‚
å¦‚æœåªæœŸæœ›ä»**åŒä¸€ä¸ª**ä»“åº“çš„åˆ†æ”¯ä¸­å–å¾—PRsï¼Œä»¥ä¸‹ç¤ºä¾‹æä¾›ä¿®æ”¹ç„¶åè¿è¡Œ`on` `pull_request`äº‹ä»¶çš„æ–¹æ¡ˆã€‚

> âš ï¸ è¿™ä¸ªè§£å†³æ–¹æ¡ˆåªæœ‰åœ¨æ‰€æœ‰PRséƒ½æ¥è‡ª**åŒä¸€ä¸ª**ä»“åº“æ—¶æ‰èƒ½å·¥ä½œï¼
> æŸ¥çœ‹ä¸‹é¢çš„ [Forksçš„Pullè¯·æ±‚](#pull-requests-from-forks)ã€‚

<GitHubActions2 />

1. åˆ›å»ºä¸€ä¸ªGitHub Actions `workflow` æ–‡ä»¶ã€‚ï¼ˆä¾‹å¦‚ï¼š`.github/workflows/pr_benchmarks.yml`ï¼‰
2. ä»…å½“æ¥è‡ªåŒä¸€ä»“åº“çš„æ‹‰å–è¯·æ±‚(`pull_request`)äº‹ä»¶å‘ç”Ÿæ—¶è¿è¡Œã€‚å¯¹äºå¤„ç†Fork PRsï¼Œè¯·çœ‹ä¸‹é¢çš„[ä»Forksçš„Pullè¯·æ±‚](#pull-requests-from-forks)ã€‚
3. ä¸º `GITHUB_TOKEN` [è®¾ç½®æƒé™](https://docs.github.com/zh/actions/using-jobs/assigning-permissions-to-jobs#setting-the-github_token-permissions-for-a-specific-job)ï¼Œå°† `pull-requests` çš„æƒé™è®¾ä¸º `write`ã€‚æ ¹æ®æ‚¨çš„ GitHub è®¾ç½®ï¼Œè¿™å¯èƒ½å¹¶éå¿…éœ€ã€‚ä½†æ˜¯ï¼Œå¯¹æ‰€æœ‰åœ¨[2023å¹´2æœˆ2æ—¥ä¹‹åå»ºç«‹çš„](https://github.blog/changelog/2023-02-02-github-actions-updating-the-default-github_token-permissions-to-read-only/)ç»„ç»‡å’Œä¸ªäººä»“åº“æ¥è¯´ï¼Œè¿™æ˜¯é»˜è®¤è¡Œä¸ºã€‚æŸ¥çœ‹[GitHub æ–‡æ¡£](https://docs.github.com/zh/actions/security-guides/automatic-token-authentication#modifying-the-permissions-for-the-github_token)ä»¥è·å–å®Œæ•´æ¦‚è§ˆã€‚
3. [é€‰æ‹©åˆ†æ”¯](http://localhost:3000/zh/docs/explanation/branch-selection/)æ¥ä½¿ç”¨ï¼š
        1. å¦‚æœå½“å‰åˆ†æ”¯æ•°æ®å·²ç»å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨å½“å‰åˆ†æ”¯æ•°æ®ã€‚ï¼ˆä¾‹å¦‚ï¼š`--if-branch "$GITHUB_REF_NAME"`ï¼‰
        2. å¦‚æœPRç›®æ ‡åˆ†æ”¯çš„æ•°æ®å’Œé˜ˆå€¼å·²ç»å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªå…‹éš†ã€‚ï¼ˆä¾‹å¦‚ï¼š`--else-if-branch "$GITHUB_BASE_REF"`ï¼‰
        3. å¦åˆ™ï¼Œè¯·åˆ›å»º`main`åˆ†æ”¯æ•°æ®å’Œé˜ˆå€¼çš„å…‹éš†ã€‚ï¼ˆä¾‹å¦‚ï¼š`--else-if-branch main`ï¼‰
4. è®¾ç½®GitHub APIèº«ä»½éªŒè¯ä»¤ç‰Œã€‚ï¼ˆä¾‹å¦‚ï¼š`--github-actions "${{ secrets.GITHUB_TOKEN }}"`ï¼‰å½“ä½œä¸ºæ‹‰å–è¯·æ±‚çš„ä¸€éƒ¨åˆ†è®¾ç½®æ­¤é€‰é¡¹æ—¶ï¼Œç»“æœå°†ä»¥è¯„è®ºçš„å½¢å¼æ·»åŠ åˆ°æ‹‰å–è¯·æ±‚ä¸­ã€‚è¿™ä½¿ç”¨äº†[GitHub Actions `GITHUB_TOKEN` ç¯å¢ƒå˜é‡](https://docs.github.com/ja/actions/security-guides/automatic-token-authentication)ã€‚
5. æŸ¥çœ‹[bencher run](/zh/docs/explanation/bencher-run/)æ–‡æ¡£ï¼Œå…¨é¢äº†è§£å¦‚ä½•ä½¿ç”¨`--ci-*`æ ‡å¿—é…ç½®æ‹‰å–è¯·æ±‚è¯„è®ºçš„æ‰€æœ‰æ–¹å¼ã€‚
6. ï¼ˆæœªæ˜¾ç¤ºï¼‰åˆ›å»ºç¬¬äºŒä¸ªGitHub Actions `workflow` æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ä¸Šè¿°åˆå§‹ç¤ºä¾‹åœ¨`push`äº‹ä»¶å‘ç”Ÿåˆ°`main`åˆ†æ”¯æ—¶è¿è¡Œã€‚ï¼ˆä¾‹å¦‚ï¼š`.github/workflows/benchmarks.yml`ï¼‰

## Forksçš„Pullè¯·æ±‚

å¦‚æœä½ è®¡åˆ’æ¥å—æ¥è‡ªforksçš„pullè¯·æ±‚, åœ¨å…¬å…±å¼€æºé¡¹ç›®ä¸­è¿™ç»å¸¸æ˜¯å¿…è¦çš„ï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªç¨å¾®ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚
å‡ºäºå®‰å…¨åŸå› ï¼Œä½ çš„`BENCHER_API_TOKEN`å’Œ`GITHUB_TOKEN`è¿™æ ·çš„ç§˜å¯†åœ¨forks PRsçš„GitHub Actionsä¸­æ˜¯æ— æ³•è·å–çš„ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªå¤–éƒ¨è´¡çŒ®è€…ä»ä¸€ä¸ªforkæ‰“å¼€ä¸€ä¸ªPRï¼Œä¸Šé¢çš„ä¾‹å­å°±ä¸èƒ½å·¥ä½œäº†ã€‚
å¯¹äºfork PRsæœ‰ä¸¤ä¸ªé€‰é¡¹:

<ul>
  <li>[Benchmark Fork PR from Target Branch with Required Reviewers](#benchmark-fork-pr-from-target-branch-with-required-reviewers)</li>
  <li>[Benchmark Fork PR and Upload from Default Branch](#benchmark-fork-pr-and-upload-from-default-branch)</li>
</ul>

### æœ‰éœ€æ±‚è¯„å®¡è€…çš„ç›®æ ‡åˆ†æ”¯ä¹‹ä¸­çš„Fork PRé¢„è§ˆ

> âš ï¸ å®¡æ‰¹ä»»ä½• fork PR ä¹‹å‰ï¼Œ**éå¸¸**ï¼Œ**éå¸¸** é‡è¦çš„æ˜¯è¦å½»åº•çš„è¿›è¡Œå®¡æ ¸ï¼
> å¦‚æœæ²¡æœ‰åšåˆ°è¿™ä¸€ç‚¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€ä¸ª pwn è¯·æ±‚ï¼
>
> å¦‚æœä½ ä¸å¸Œæœ›é¢å¯¹è¿™ç§å‹åŠ›ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„ [ä»é»˜è®¤åˆ†æ”¯å¯¹ Fork PR è¿›è¡ŒåŸºå‡†æµ‹è¯•å¹¶ä¸Šä¼ ](#benchmark-fork-pr-and-upload-from-default-branch)ã€‚

<GitHubActions3 />

1. åˆ›å»ºä¸€ä¸ªGitHub Actions `workflow` æ–‡ä»¶ã€‚(ä¾‹å¦‚ï¼š`.github/workflows/pr_benchmarks.yml`)
1. åœ¨[`pull_request_target`äº‹ä»¶](https://docs.github.com/zh/actions/using-workflows/events-that-trigger-workflows#pull_request_target)ä¸Šè¿è¡Œã€‚
1. åˆ›å»ºä¸€ä¸ªåä¸º`fork_pr_requires_review`çš„`job`ï¼Œ ç­‰å¾…å®¡æŸ¥è€…åœ¨æ¯ä¸ªforkçš„pullè¯·æ±‚ï¼ˆ`external`ï¼‰è¿è¡Œå‰è¿›è¡Œå®¡æŸ¥ã€‚
1. åˆ›å»ºä¸€ä¸ªä¾èµ–äº`fork_pr_requires_review`çš„ç¬¬ä¸‰ä¸ªå·¥ä½œã€‚
   1. æ£€å‡ºè¯·æ±‚åˆ†æ”¯ï¼Œä½†ä¸ä¿ç•™gitå‡­æ®ã€‚(ä¾‹å¦‚ï¼š`persist-credentials: false`)
   2. å¯¹æ‰€æœ‰ä¸å¯ä¿¡çš„è¾“å…¥ä½¿ç”¨å•å¼•å·ã€‚(ä¾‹å¦‚ï¼š`--if-branch '${{ github.head_ref }}'`)
   3. ç›´æ¥ä¼ é€’æ‰€æœ‰çš„ç§˜å¯†ã€‚(ä¾‹å¦‚ï¼š`--token "${{ secrets.BENCHER_API_TOKEN }}"`)
   4. ç”¨`bencher run`è¿è¡Œå¹¶è·Ÿè¸ªä½ çš„è¯·æ±‚åŸºå‡†æµ‹è¯•ã€‚
1. ï¼ˆæœªé€‰ç¤ºï¼‰åˆ›å»ºç¬¬äºŒä¸ªGitHub Actions `workflow`æ–‡ä»¶å¹¶ä½¿ç”¨åˆå§‹ç¤ºä¾‹åœ¨`main`åˆ†æ”¯çš„`push`äº‹ä»¶ä¸Šè¿è¡Œã€‚(ä¾‹å¦‚ï¼š`.github/workflows/benchmarks.yml`)

è¿™ä¸ªè®¾ç½®æ–¹æ³•çš„åŸå› æ˜¯`pull_request_target`åœ¨pullè¯·æ±‚çš„ç›®æ ‡åˆ†æ”¯çš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼Œ
åœ¨è¿™é‡Œä½ çš„`BENCHER_API_TOKEN`å’Œ`GITHUB_TOKEN`æ˜¯å¯ç”¨çš„ã€‚
å› æ­¤ï¼Œè¿™ä¸ªå·¥ä½œæµç¨‹åªæœ‰åœ¨ _ç›®æ ‡_ åˆ†æ”¯ä¸Šæ‰èƒ½è¿è¡Œã€‚

ä¸ºäº†é…ç½®è¿™ä¸ªï¼Œä½ éœ€è¦[åˆ›å»ºä¸¤ä¸ªGitHub Action Environment](https://docs.github.com/zh/actions/deployment/targeting-different-environments/using-environments-for-deployment#using-an-environment)
(ä¾‹å¦‚ï¼š`Repo -> Settings -> Environments -> New environment`).
`internal`ç¯å¢ƒåº”è¯¥æ²¡æœ‰`Deployment protection rules`.
ç„¶è€Œï¼Œ`external`ç¯å¢ƒåº”è¯¥è®¾ç½®`Required reviewers`ä¸ºé‚£äº›è¢«ä¿¡ä»»çš„å¯ä»¥åœ¨åŸºå‡†åŒ–æµ‹è¯•å‰å®¡æŸ¥fork PRsã€‚

å•ç‹¬åŒ…è£…PRåˆ†æ”¯åç§°ï¼ˆhead refï¼‰æ˜¯éå¸¸é‡è¦çš„ã€‚(ä¾‹å¦‚ï¼š`--if-branch '${{ github.head_ref }}'`)å¦åˆ™ä¸€ä¸ªæ”»å‡»è€…åˆ›å»ºä¸€ä¸ªæ¶æ„å‘½åçš„åˆ†æ”¯å¯èƒ½è¿›è¡Œå‘½ä»¤æ³¨å…¥ã€‚æŸ¥çœ‹[GitHub å®‰å…¨å®éªŒå®¤é˜è¿°](https://securitylab.github.com/research/github-actions-untrusted-input/)å…³äºå¦‚ä½•é¢„é˜²æ¶æ„è¯·æ±‚æ¥è‡ªä¸å¯ä¿¡è¾“å…¥çš„å®Œå…¨æ¦‚è§ˆã€‚

é¿å…è®¾ç½®ä»»ä½•ç§˜å¯†ä½œä¸ºç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚`GITHUB_TOKEN`å’Œ`BENCHER_API_TOKEN`ã€‚
è€Œæ˜¯ç›´æ¥å‘`bencher run`ä¼ å…¥ç§˜å¯†.(ä¾‹å¦‚ï¼š`--token "${{ secrets.BENCHER_API_TOKEN }}"`)
æŸ¥çœ‹[GitHubå®‰å…¨å®éªŒå®¤é˜è¿°](https://securitylab.github.com/research/github-actions-preventing-pwn-requests/)
å’Œ[è¿™ç¯‡åšå®¢æ–‡ç« ](https://nathandavison.com/blog/github-actions-and-the-threat-of-malicious-pull-requests)
å…³äºå¦‚ä½•é¢„é˜²æ¶æ„è¯·æ±‚çš„å®Œå…¨æ¦‚è§ˆã€‚

### Defaultåˆ†æ”¯çš„é¢„è§ˆFork PRå’Œä¸Šä¼ 

<GitHubActions4 />

1. åˆ›å»ºä¸€ä¸ª `Run and Cache Benchmarks` å·¥ä½œæµç¨‹æ–‡ä»¶ã€‚(ä¾‹å¦‚ï¼š`.github/workflows/pr_benchmarks.yml`)
2. å·¥ä½œæµä¸­æ‰€æœ‰çš„å·¥ä½œåœ¨`pull_request`äº‹ä»¶ä¸Šè¿è¡Œã€‚
3. è¿è¡ŒåŸºå‡†æµ‹è¯•å¹¶ä¿å­˜ç»“æœåˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚(ä¾‹å¦‚ï¼š`benchmark_results.json`)
4. ä½œä¸ºä¸€ä¸ªartifactä¸Šä¼ åŸºå‡†æµ‹è¯•ç»“æœæ–‡ä»¶ã€‚
5. ä½œä¸ºä¸€ä¸ªartifactä¸Šä¼ `pull_request`äº‹ä»¶å¯¹è±¡ã€‚

<GitHubActions5 />

1. åˆ›å»ºä¸€ä¸ªç¬¬äºŒä¸ªå·¥ä½œæµç¨‹æ–‡ä»¶ï¼Œ`Track Benchmarks`ã€‚(ä¾‹å¦‚ï¼š`.github/workflows/track_benchmarks.yml`)
2. é€šè¿‡[the `workflow_run` äº‹ä»¶](https://docs.github.com/zh/actions/using-workflows/events-that-trigger-workflows#workflow_run)å°†`Track Benchmarks`é“¾æ¥åˆ°`Run and Cache Benchmarks`ã€‚
3. ä¸‹è½½ç¼“å­˜çš„åŸºå‡†æµ‹è¯•ç»“æœå’Œ`pull_request`äº‹ä»¶ã€‚
4. æå–ç¼“å­˜çš„åŸºå‡†æµ‹è¯•ç»“æœå’Œ`pull_request`äº‹ä»¶ã€‚
5. å°†`pull_request`äº‹ä»¶ä¸­å¿…è¦çš„æ•°æ®å¯¼å‡ºä¸ºç¯å¢ƒå˜é‡ã€‚
6. ä½¿ç”¨`bencher run`å¯¹ç¼“å­˜çš„åŸºå‡†æµ‹è¯•ç»“æœè¿›è¡Œè·Ÿè¸ªï¼š
   1. å¯¹æ‰€æœ‰ä¸å¯ä¿¡çš„è¾“å…¥ä½¿ç”¨å•å¼•å·ã€‚ï¼ˆä¾‹å¦‚ï¼š`--if-branch '${{ env.PR_HEAD }}'`ï¼‰
   2. æ˜ç¡®çš„ä¼ å…¥pullè¯·æ±‚æ•°å­—ã€‚ï¼ˆä¾‹å¦‚ï¼š`--ci-number '${{ env.PR_NUMBER }}'`ï¼‰ã€‚
   3. ä¼ å…¥åŸºå‡†æµ‹è¯•ç»“æœæ–‡ä»¶çš„æ–‡ä»¶è·¯å¾„ã€‚ï¼ˆä¾‹å¦‚ï¼š`--file "$BENCHMARK_RESULTS"`ï¼‰
1. ï¼ˆæœªé€‰ç¤ºï¼‰åˆ›å»ºç¬¬ä¸‰ä¸ªGitHub Actions `workflow`æ–‡ä»¶å¹¶ä½¿ç”¨åˆå§‹ç¤ºä¾‹åœ¨`main`åˆ†æ”¯çš„`push`äº‹ä»¶ä¸Šè¿è¡Œã€‚(ä¾‹å¦‚ï¼š`.github/workflows/benchmarks.yml`)

è¿™ä¸ªè®¾ç½®æ–¹æ³•çš„åŸå› æ˜¯`workflow_run`åœ¨ä»“åº“çš„é»˜è®¤åˆ†æ”¯çš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼Œ
åœ¨è¿™é‡Œä½ çš„`BENCHER_API_TOKEN`å’Œ`GITHUB_TOKEN`æ˜¯å¯ç”¨çš„ã€‚
å› æ­¤ï¼Œè¿™äº›å·¥ä½œæµç¨‹åªæœ‰åœ¨é»˜è®¤åˆ†æ”¯ä¸Šæ‰èƒ½è¿è¡Œã€‚
æŸ¥çœ‹[ä½¿ç”¨è§¦å‘çš„å·¥ä½œæµçš„æ•°æ®](https://docs.github.com/zh/actions/using-workflows/events-that-trigger-workflows#using-data-from-the-triggering-workflow)ä»¥è·å–å®Œå…¨æ¦‚è§ˆã€‚
åœ¨åˆæ¬¡å·¥ä½œæµä¸­çš„pullè¯·æ±‚æ•°å­—ï¼Œå¤´åˆ†æ”¯å’ŒåŸºåˆ†æ”¯éœ€è¦æ˜ç¡®çš„ä¼ é€’å› ä¸ºä»–ä»¬åœ¨`workflow_run`ä¸­ä¸å¯ç”¨ã€‚

å•ç‹¬åŒ…è£…PRåˆ†æ”¯åç§°ï¼ˆhead refï¼‰æ˜¯éå¸¸é‡è¦çš„ã€‚(ä¾‹å¦‚ï¼š`--if-branch '${{ env.PR_HEAD }}'`)å¦åˆ™ä¸€ä¸ªæ”»å‡»è€…åˆ›å»ºä¸€ä¸ªæ¶æ„å‘½åçš„åˆ†æ”¯å¯èƒ½è¿›è¡Œå‘½ä»¤æ³¨å…¥ã€‚æŸ¥çœ‹[GitHub å®‰å…¨å®éªŒå®¤é˜è¿°](https://securitylab.github.com/research/github-actions-untrusted-input/)å…³äºå¦‚ä½•é¢„é˜²æ¶æ„è¯·æ±‚æ¥è‡ªä¸å¯ä¿¡è¾“å…¥çš„å®Œå…¨æ¦‚è§ˆã€‚

é¿å…åœ¨`Run and Cache Benchmarks`å·¥ä½œæµç¨‹æ–‡ä»¶ä¸­è®¾ç½®ä»»ä½•ç§˜å¯†ä¸ºç¯å¢ƒå˜é‡ã€‚
æŸ¥çœ‹[GitHubå®‰å…¨å®éªŒå®¤é˜è¿°](https://securitylab.github.com/research/github-actions-preventing-pwn-requests/)
å’Œ[è¿™ç¯‡åšå®¢æ–‡ç« ](https://nathandavison.com/blog/github-actions-and-the-threat-of-malicious-pull-requests)
å…³äºå¦‚ä½•é¢„é˜²æ¶æ„è¯·æ±‚çš„å®Œå…¨æ¦‚è§ˆã€‚

<br/>
<br/>

> ğŸ°æ­å–œï¼ä½ å·²ç»å­¦ä¹ åˆ°äº†å¦‚ä½•åœ¨GitHub Actionsä¸­ä½¿ç”¨Bencher!  ğŸ‰

<br/>

<h2><a href="/zh/docs/explanation/benchmarking/">ç»§ç»­å‰è¿›: åŸºå‡†æµ‹è¯•æ¦‚è¿° â¡</a></h2>
