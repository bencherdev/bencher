import TestbedCreate from "../testbed-create.mdx";
import ThresholdCreateStatistical from "../threshold-create-statistical.mdx";
import RunMainStatistical from "../run-main-statistical.mdx";
import RunFeatureStatistical from "../run-feature-statistical.mdx";

## ç»Ÿè®¡æŒç»­åŸºå‡†æµ‹è¯•

æ¥ç€[å¿«é€Ÿå¼€å§‹][quick start]å’Œ[Docker è‡ªæ‰˜ç®¡][docker self-hosted]æ•™ç¨‹ï¼Œ
è®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„ `Save Walter White` é¡¹ç›®æ·»åŠ ç»Ÿè®¡[æŒç»­åŸºå‡†æµ‹è¯•][continuous benchmarking]åŠŸèƒ½ã€‚

> ğŸ° ç¡®ä¿ä½ å·²ç»
> [åˆ›å»ºäº†ä¸€ä¸ª API ä»¤ç‰Œå¹¶å°†å…¶è®¾ç½®ä¸º `BENCHER_API_TOKEN` ç¯å¢ƒå˜é‡][create an api token]
> å†ç»§ç»­å‰è¡Œï¼

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ Testbed æ¥ä»£è¡¨æˆ‘ä»¬çš„ CI è¿è¡Œå™¨ï¼Œé€‚å½“å‘½åä¸º `ci-runner`ã€‚

<TestbedCreate />

1. ä½¿ç”¨ `bencher testbed create` CLI å­å‘½ä»¤ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [the `testbed create` docs][testbed create]ã€‚
   (ä¾‹å¦‚: `bencher testbed create`)
2. å°† `--name` é€‰é¡¹è®¾ç½®ä¸ºæ‰€éœ€çš„ Testbed åç§°ã€‚
   (ä¾‹å¦‚: `--name ci-runner`)
3. å°†é¡¹ç›®å‚æ•°æŒ‡å®šä¸º `Save Walter White` é¡¹ç›®çš„ slugã€‚
   (ä¾‹å¦‚: `save-walter-white-1234abcd`)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸º `ci-runner` Testbed åˆ›å»ºä¸€ä¸ªæ–°çš„[é˜ˆå€¼][thresholds]ï¼š

<ThresholdCreateStatistical />

1. ä½¿ç”¨ `bencher threshold create` CLI å­å‘½ä»¤ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [the `threshold create` docs][threshold create]ã€‚
   (ä¾‹å¦‚: `bencher threshold create`)
2. å°† `--branch` é€‰é¡¹è®¾ç½®ä¸ºé»˜è®¤çš„ `main` åˆ†æ”¯ã€‚
   (ä¾‹å¦‚: `--branch main`)
3. å°† `--branch` é€‰é¡¹è®¾ç½®ä¸ºæ–°çš„ `ci-runner` Testbedã€‚
   (ä¾‹å¦‚: `--testbed ci-runner`)
4. å°† `--measure` é€‰é¡¹è®¾ç½®ä¸º `bencher mock` ç”Ÿæˆçš„å†…ç½® `Latency` æµ‹é‡å€¼ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [the definition of Measure][measure]ã€‚
   (ä¾‹å¦‚: `--measure Latency`)
5. å°† `--test` é€‰é¡¹è®¾ç½®ä¸º `t-test` é˜ˆå€¼ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [Thresholds & Alerts][t-test]ã€‚
   (ä¾‹å¦‚: `--test t-test`)
6. å°† `--upper-boundary` é€‰é¡¹è®¾ç½®ä¸ºä¸Šé™å€¼ `0.95`ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [Thresholds & Alerts][t-test upper boundary]ã€‚
   (ä¾‹å¦‚: `--upper-boundary 0.95`)
7. å°†é¡¹ç›®å‚æ•°æŒ‡å®šä¸º `Save Walter White` é¡¹ç›®çš„ slugã€‚
   (ä¾‹å¦‚: `save-walter-white-1234abcd`)

ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½åœ¨ CI ä¸­è¿è¡Œæˆ‘ä»¬çš„åŸºå‡†æµ‹è¯•äº†ã€‚
å› ä¸ºæ¯ä¸ª CI ç¯å¢ƒéƒ½æœ‰ä¸€ç‚¹ä¸åŒï¼Œ
ä¸‹é¢çš„ç¤ºä¾‹æ›´å¤šçš„æ˜¯è¯´æ˜æ€§çš„ï¼Œè€Œä¸æ˜¯å®ç”¨æ€§çš„ã€‚
æ›´å…·ä½“çš„ç¤ºä¾‹ï¼Œè¯·å‚è§ [GitHub Actions ä¸­çš„æŒç»­åŸºå‡†æµ‹è¯•][github actions]
å’Œ [GitLab CI/CD ä¸­çš„æŒç»­åŸºå‡†æµ‹è¯•][gitlab ci/cd]ã€‚

æˆ‘ä»¬éœ€è¦é€šè¿‡åœ¨ CI ä¸­é’ˆå¯¹æ¯æ¬¡æ›´æ”¹è¿›è¡ŒåŸºå‡†æµ‹è¯•æ¥ä¸ºæˆ‘ä»¬çš„ `main` åˆ†æ”¯åˆ›å»ºå¹¶ç»´æŠ¤å†å²åŸºå‡†ï¼š

<RunMainStatistical />

1. ä½¿ç”¨ <code><a href="/zh/docs/explanation/bencher-run/">bencher run</a></code> CLI å­å‘½ä»¤
   è¿è¡Œæ‚¨çš„ `feature-branch` åˆ†æ”¯åŸºå‡†æµ‹è¯•ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [the `bencher run` CLI subcommand][bencher run]ã€‚
   (ä¾‹å¦‚: `bencher run`)
2. å°† `--project` é€‰é¡¹è®¾ç½®ä¸ºé¡¹ç›® slugã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [the `--project` docs][project option]ã€‚
   (ä¾‹å¦‚: `--project save-walter-white-1234abcd`)
3. å°† `--branch` é€‰é¡¹è®¾ç½®ä¸ºé»˜è®¤çš„åˆ†æ”¯åç§°ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [branch selection][branch selection branch]ã€‚
   (ä¾‹å¦‚: `--branch main`)
4. å°† `--testbed` é€‰é¡¹è®¾ç½®ä¸º Testbed åç§°ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [the `--tested` docs][testbed option]ã€‚
   (ä¾‹å¦‚: `--testbed ci-runner`)
5. å°† `--adapter` é€‰é¡¹è®¾ç½®ä¸ºæ‰€éœ€çš„åŸºå‡†æµ‹è¯•é€‚é…å™¨é€‚é…å™¨ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [benchmark harness adapters][adapters]ã€‚
   (ä¾‹å¦‚: `--adapter json`)
6. å°† `--err` æ ‡å¿—è®¾ç½®ä¸ºåœ¨ç”Ÿæˆè­¦æŠ¥æ—¶å¤±è´¥å‘½ä»¤ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [Threshold & Alerts][alerts]ã€‚
   (ä¾‹å¦‚: `--err`)
7. æŒ‡å®šåŸºå‡†å‘½ä»¤å‚æ•°ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [benchmark command][command argument]ã€‚
   (ä¾‹å¦‚: `bencher mock`)

æœ€åï¼Œæˆ‘ä»¬å‡†å¤‡å¥½åœ¨ CI ä¸­æ•è·æ€§èƒ½å›å½’äº†ã€‚
è¿™æ˜¯æˆ‘ä»¬å¦‚ä½•åœ¨ CI ä¸­è·Ÿè¸ªä¸€ä¸ªåä¸º `feature-branch` çš„æ–°åŠŸèƒ½åˆ†æ”¯çš„æ€§èƒ½ï¼š

<RunFeatureStatistical />

1. ä½¿ç”¨ <code><a href="/zh/docs/explanation/bencher-run/">bencher run</a></code> CLI å­å‘½ä»¤
   è¿è¡Œæ‚¨çš„ `feature-branch` åˆ†æ”¯åŸºå‡†æµ‹è¯•ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [the `bencher run` CLI subcommand][bencher run]ã€‚
   (ä¾‹å¦‚: `bencher run`)
2. å°† `--project` é€‰é¡¹è®¾ç½®ä¸ºé¡¹ç›® slugã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [the `--project` docs][project option]ã€‚
   (ä¾‹å¦‚: `--project save-walter-white-1234abcd`)
3. å°† `--branch` é€‰é¡¹è®¾ç½®ä¸ºåŠŸèƒ½åˆ†æ”¯åç§°ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [branch selection][branch selection branch]ã€‚
   (ä¾‹å¦‚: `--branch feature-branch`)
4. å°† `--branch-start-point` é€‰é¡¹è®¾ç½®ä¸ºåŠŸèƒ½åˆ†æ”¯çš„èµ·ç‚¹ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [branch selection][branch selection start point]ã€‚
   (ä¾‹å¦‚: `--branch-start-point main`)
5. å°† `--branch-start-point-hash` é€‰é¡¹è®¾ç½®ä¸ºåŠŸèƒ½åˆ†æ”¯èµ·ç‚¹çš„ `git` å“ˆå¸Œå€¼ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [branch selection][branch selection start point hash]ã€‚
   (ä¾‹å¦‚: `--branch-start-point-hash 32ae...dd8b`)
6. å°† `--testbed` é€‰é¡¹è®¾ç½®ä¸º Testbed åç§°ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [the `--tested` docs][testbed option]ã€‚
   (ä¾‹å¦‚: `--testbed ci-runner`)
7. å°† `--adapter` é€‰é¡¹è®¾ç½®ä¸ºæ‰€éœ€çš„åŸºå‡†æµ‹è¯•é€‚é…å™¨é€‚é…å™¨ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [benchmark harness adapters][adapters]ã€‚
   (ä¾‹å¦‚: `--adapter json`)
8. å°† `--err` æ ‡å¿—è®¾ç½®ä¸ºåœ¨ç”Ÿæˆè­¦æŠ¥æ—¶å¤±è´¥å‘½ä»¤ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [Threshold & Alerts][alerts]ã€‚
   (ä¾‹å¦‚: `--err`)
9. æŒ‡å®šåŸºå‡˜å‘½ä»¤å‚æ•°ã€‚
   æ›´å¤šè¯¦æƒ…å‚è§ [benchmark command][command argument]ã€‚
   (ä¾‹å¦‚: `bencher mock`)

åœ¨ CI ä¸­é¦–æ¬¡è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œ
å®ƒä¼šåˆ›å»º `feature-branch` åˆ†æ”¯ï¼Œå› ä¸ºå®ƒä¹‹å‰ä¸å­˜åœ¨ã€‚
æ–°çš„ `feature-branch` å°†ä½¿ç”¨å“ˆå¸Œå€¼ä¸º `32aea434d751648726097ed3ac760b57107edd8b` çš„ `main` åˆ†æ”¯ä½œä¸ºå…¶èµ·ç‚¹ã€‚
è¿™æ„å‘³ç€ `feature-branch` å°†æ‹¥æœ‰ `main` åˆ†æ”¯æ‰€æœ‰çš„æ•°æ®å’Œ[é˜ˆå€¼][thresholds]æ¥å¯¹ `bencher mock` çš„ç»“æœè¿›è¡Œå¯¹æ¯”ï¼Œ
æ— è®ºæ˜¯ç¬¬ä¸€æ¬¡è¿˜æ˜¯åç»­è¿è¡Œã€‚

[quick start]: /zh/docs/tutorial/quick-start/
[docker self-hosted]: /zh/docs/tutorial/docker/
[continuous benchmarking]: /zh/docs/explanation/continuous-benchmarking/
[create an api token]: /zh/docs/tutorial/quick-start/#create-an-api-token
[testbed create]: /zh/docs/api/projects/testbeds/#post-v0projectsprojecttestbeds
[thresholds]: /zh/docs/explanation/thresholds/
[threshold create]: /zh/docs/api/projects/thresholds/#post-v0projectsprojectthresholds
[measure]: /zh/docs/explanation/benchmarking/#measures
[t-test]: /zh/docs/explanation/thresholds/#t-test-thresholds
[t-test upper boundary]: /zh/docs/explanation/thresholds/#t-test-threshold-upper-boundary
[github actions]: /zh/docs/how-to/github-actions/
[gitlab ci/cd]: /zh/docs/how-to/gitlab-ci-cd/
[bencher run]: /zh/docs/explanation/bencher-run/
[project option]: /zh/docs/explanation/bencher-run/#--project-project
[branch selection branch]: /zh/docs/explanation/branch-selection/#--branch-branch
[testbed option]: /zh/docs/explanation/bencher-run/#--testbed-testbed
[adapters]: /zh/docs/explanation/adapters/
[alerts]: /zh/docs/explanation/thresholds/#alerts
[command argument]: /zh/docs/explanation/bencher-run/#benchmark-command
[branch selection start point]: /zh/docs/explanation/branch-selection/#--branch-start-point-branch
[branch selection start point hash]: /zh/docs/explanation/branch-selection/#--branch-start-point-hash-hash