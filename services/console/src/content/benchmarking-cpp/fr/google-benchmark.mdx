---
title: "Google Benchmark"
description: "Un guide √©tape par √©tape sur la fa√ßon de faire du benchmarking de code C++ avec Google Benchmark"
heading: "Comment faire du benchmarking de code C++ avec Google Benchmark"
published: "2024-11-03T16:30:00Z"
modified: "2024-11-03T16:30:00Z"
sortOrder: 1
---

import Benchmarking from "../../../chunks/benchmarking/fr/benchmarking.mdx";
import FizzBuzzRules from "../../../chunks/benchmarking/fr/fizz-buzz-rules.mdx";
import FizzBuzzCpp from "../../../chunks/benchmarking-cpp/fr/fizz-buzz-cpp.mdx";
import StepByStepCpp from "../../../chunks/benchmarking-cpp/fr/step-by-step-cpp.mdx";
import MicroVsMacro from "../../../chunks/benchmarking/fr/micro-vs-macro.mdx";
import BenchmarkingCpp from "../../../chunks/benchmarking-cpp/fr/benchmarking-cpp.mdx";
import FizzBuzzRefactor from "../../../chunks/benchmarking-cpp/google-benchmark/fr/fizz-buzz-refactor.mdx";
import BenchmarkingFizzBuzz from "../../../chunks/benchmarking-cpp/google-benchmark/fr/benchmarking-fizz-buzz.mdx";
import FizzBuzzFibonacciCpp from "../../../chunks/benchmarking-cpp/fr/fizz-buzz-fibonacci-cpp.mdx";
import PlayGameCode from "../../../chunks/benchmarking-cpp/google-benchmark/play-game-code.mdx";
import BenchmarkingFizzBuzzFibonacci from "../../../chunks/benchmarking-cpp/google-benchmark/fr/benchmarking-fizz-buzz-fibonacci.mdx";
import FizzBuzzFibonacciOpenCpp from "../../../chunks/benchmarking-cpp/google-benchmark/fr/fizz-buzz-fibonacci-open-cpp.mdx";
import FizzBuzzFibonacciOpenCode from "../../../chunks/benchmarking-cpp/fizz-buzz-fibonacci-open-code.mdx";
import TheEnd from "../../../chunks/benchmarking/fr/the-end.mdx";
import OnFire from "../../../chunks/benchmarking/fr/on-fire.mdx";
import TestGameOnFireCode from "../../../chunks/benchmarking-cpp/google-benchmark/benchmark-game-on-fire-code.mdx";
import BenchmarkGameOnFireOutputStart from "../../../chunks/benchmarking-cpp/google-benchmark/benchmark-game-on-fire-output-start.mdx";
import BenchmarkGameOnFireOutput from "../../../chunks/benchmarking-cpp/google-benchmark/benchmark-game-on-fire-output.mdx";
import FizzBuzzFibonacciFix from "../../../chunks/benchmarking-cpp/google-benchmark/fr/fizz-buzz-fibonacci-fix.mdx";
import BenchmarkGameFixOutput from "../../../chunks/benchmarking-cpp/google-benchmark/benchmark-game-fix-output.mdx";
import CatchInCi from "../../../chunks/benchmarking/fr/catch-in-ci.mdx";
import CatchInCiOutput from "../../../chunks/benchmarking-cpp/google-benchmark/catch-in-ci-output.mdx";
import CatchInCiPlot from "../../../chunks/benchmarking/fr/catch-in-ci-plot.mdx";
import CatchInCiPlotRustBench from "../../../chunks/benchmarking-rust/catch-in-ci-plot-rust-bench.mdx";
import BencherFooter from "../../../chunks/learn/fr/bencher-footer.mdx";

<Benchmarking />

<FizzBuzzCpp />

<StepByStepCpp />

<MicroVsMacro />

<BenchmarkingCpp />

Both are [support by Bencher](/fr/docs/explanation/adapters/).
So why choose Google Benchmark?
Google Benchmark s'int√®gre parfaitement avec GoogleTest,
qui est le standard de facto pour les frameworks de tests unitaires dans l'√©cosyst√®me C++.
Je sugg√©rerais d'utiliser Google Benchmark pour tester la latence de votre code,
surtout si vous utilisez d√©j√† GoogleTest.
C'est-√†-dire que Google Benchmark est excellent pour mesurer le temps d'horloge.

<FizzBuzzRefactor />

<BenchmarkingFizzBuzz />

<FizzBuzzFibonacciCpp>
  <PlayGameCode />
</FizzBuzzFibonacciCpp>

<BenchmarkingFizzBuzzFibonacci />

<FizzBuzzFibonacciOpenCpp>
    <FizzBuzzFibonacciOpenCode />
</FizzBuzzFibonacciOpenCpp>

<TheEnd />

<br />

<OnFire />

<TestGameOnFireCode />

- Un micro-benchmark `BENCHMARK_game_100` pour jouer le jeu avec le nombre cent (`100`)
- Un micro-benchmark `BENCHMARK_game_1_000_000` pour jouer le jeu avec le nombre un million (`1_000_000`)

Quand je l'ai ex√©cut√©, j'ai obtenu ceci :

<BenchmarkGameOnFireOutputStart />

Attendez... attendez...

<BenchmarkGameOnFireOutput />

Quoi ! `1,249 ns` x `10,000` devrait √™tre `12,490,000 ns` et non `110,879,642 ns` ü§Ø
M√™me si mon code de s√©quence de Fibonacci √©tait fonctionnellement correct, il doit y avoir un bug de performance quelque part.

<FizzBuzzFibonacciFix />

Maintenant, relan√ßons ces benchmarks et voyons comment nous avons fait :

<BenchmarkGameFixOutput />

Oh, wow ! Notre benchmark `BENCHMARK_game` est redescendu √† peu pr√®s au niveau o√π il √©tait pour le FizzBuzz original.
J'aimerais pouvoir me souvenir exactement de ce score. √áa fait trois semaines.
Mon historique de terminal ne va pas aussi loin, et Google Benchmark ne garde pas les r√©sultats.
Mais je pense que c'est proche !

Le benchmark `BENCHMARK_game_100` a diminu√© de pr√®s de 50 fois pour atteindre `34.4 ns`.
Et le benchmark `BENCHMARK_game_1_000_000` a diminu√© de plus de 1,500,000x ! De `110,879,642 ns` √† `61.6 ns` !

> üê∞ Au moins, nous avons d√©tect√© ce bug de performance avant qu'il n'arrive en production... oh, d'accord. Peu importe...

<CatchInCi />

<CatchInCiOutput />

<CatchInCiPlot />

<CatchInCiPlotRustBench title="Comment faire du benchmarking de C++ avec Google Benchmark" />

<BencherFooter />