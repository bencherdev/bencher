import ShellForm from "../shell-form.mdx";
import ExecForm from "../exec-form.mdx";

## Comando de Benchmark

O primeiro argumento de `bencher run` √© o comando de benchmark opcional.
Este √© o comando que ser√° executado, invocando seu harness de benchmark.
Tamb√©m pode ser definido usando a vari√°vel de ambiente `BENCHER_CMD`.
Por padr√£o este comando √© executado em um shell, que pode ser configurado com as op√ß√µes [`--shell`][shell option] e [`--flag`][flag option].
Sua sa√≠da √© analisada por um [adaptador de harness de benchmark][benchmark harness adapters], que pode ser definido usando a op√ß√£o [`--adapter`][adapter option].
No entanto, se o harness de benchmark gravar a sa√≠da em um arquivo, a op√ß√£o [`--file`][file option] tamb√©m deve ser usada para especificar o caminho do arquivo de sa√≠da.
Como alternativa, para acompanhar o tamanho do arquivo de sa√≠da (por exemplo, o tamanho do bin√°rio) em vez do seu conte√∫do, use a op√ß√£o [`--file-size`][file size option] para especificar o caminho do arquivo de sa√≠da.

Se preferir que o comando n√£o seja executado em um shell, voc√™ pode usar a flag `--exec` ou simplesmente fornecer argumentos adicionais ao seu comando como argumentos adicionais para `bencher run`.

Shell Form:
<ShellForm />

Exec Form:
<ExecForm />

O comando de benchmark pode ser executado v√°rias vezes usando a op√ß√£o [`--iter`][iter option], e esses resultados podem ser combinados em um √∫nico resultado usando a op√ß√£o [`--fold`][fold option].
Se qualquer uma das itera√ß√µes falhar, ent√£o o comando inteiro ser√° considerado como tendo falhado, a menos que a flag [`--allow-failure`][allow failure flag] esteja definida.

Se o comando de benchmark n√£o for especificado, mas a op√ß√£o [`--file`][file option] for, ent√£o o `bencher run` apenas ler√° do caminho do arquivo de sa√≠da.
Da mesma forma, se o comando de benchmark n√£o for especificado, mas a op√ß√£o [`--file-size`][file size option] for, ent√£o o `bencher run` apenas ler√° o tamanho do arquivo no caminho fornecido.
As op√ß√µes `--file` e `--file-size` podem ser especificadas m√∫ltiplas vezes para ler de v√°rios arquivos.

<blockquote>
<details>
  <summary>üê∞ Dicas para usar a op√ß√£o <code>-&#8288;-file</code></summary>
  A op√ß√£o <code>-&#8288;-file</code> pode ser usada para ler resultados de benchmark de um arquivo.
  Voc√™ pode especificar a op√ß√£o <code>-&#8288;-file</code> v√°rias vezes para ler de v√°rios arquivos.
  Se voc√™ especificar a op√ß√£o <code>-&#8288;-file</code> v√°rias vezes,
  cada arquivo ser√° considerado uma <code>itera√ß√£o</code> separada do comando de benchmark.
  Quando exibidos, esses resultados ser√£o mostrados em tabelas separadas.

  Se voc√™ desejar combinar esses resultados em uma √∫nica <code>itera√ß√£o</code>,
  ent√£o pode definir a op√ß√£o <code>-&#8288;-iter</code> para <code>1</code>
  e definir a op√ß√£o <code>-&#8288;-fold</code> para uma das fun√ß√µes agregadas <code>min</code>, <code>max</code> ou <code>median</code>.
  Isso ir√° consolidar os resultados em uma √∫nica <code>itera√ß√£o</code> e exibi-los em uma √∫nica tabela.
  Do <b>not</b> set the <code>-&#8288;-fold</code> option to <code>mean</code>.
</details>
</blockquote>

Se nem o comando de benchmark, nem a op√ß√£o [`--file`][file option], nem a op√ß√£o [`--file-size`][file size option] forem especificados, ent√£o o `bencher run` ler√° do `stdin`.
Isso permite que voc√™ salve a sa√≠da de outro comando em um arquivo ou a passe via pipe para o `bencher run`.

[benchmark harness adapters]: /pt/docs/explanation/adapters/

[shell option]: #--shell-shell
[flag option]: #--flag-flag
[adapter option]: #--adapter-adapter
[file option]: #--file-file
[file size option]: #--file-size-file
[iter option]: #--iter-iter
[fold option]: #--fold-fold
[allow failure flag]: #--allow-failure