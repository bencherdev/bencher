import TestbedCreate from "../testbed-create.mdx";
import GitCheckoutMain from "../git-checkout-main.mdx";
import RunMainRelative from "../run-main-relative.mdx";
import ThresholdCreateRelative from "../threshold-create-relative.mdx";
import GitCheckoutFeature from "../git-checkout-feature.mdx";
import RunFeatureRelative from "../run-feature-relative.mdx";

## ç›¸å¯¹è¿ç»­åŸºå‡†æµ‹è¯•

åŸºäºæˆ‘ä»¬åœ¨[å¿«é€Ÿå¼€å§‹][quick start]å’Œ[Docker è‡ªæ‰˜ç®¡][docker self-hosted]æ•™ç¨‹ä¸­çš„å†…å®¹ï¼Œç°åœ¨è®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„â€œæ‹¯æ•‘æ²ƒå°”ç‰¹Â·æ€€ç‰¹â€é¡¹ç›®æ·»åŠ ç›¸å¯¹[è¿ç»­åŸºå‡†æµ‹è¯•][continuous benchmarking]ã€‚

> ğŸ° ç¡®ä¿ä½ å·²ç»
> [åˆ›å»ºäº†ä¸€ä¸ª API ä»¤ç‰Œï¼Œå¹¶å°†å…¶è®¾ç½®ä¸º `BENCHER_API_TOKEN` ç¯å¢ƒå˜é‡][create an api token]
> å†ç»§ç»­ï¼

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ Testbed æ¥ä»£è¡¨æˆ‘ä»¬çš„ CI è¿è¡Œå™¨ï¼Œæ°å½“åœ°å‘½åä¸º `ci-runner`ã€‚

<TestbedCreate />

1. ä½¿ç”¨ `bencher testbed create` CLI å­å‘½ä»¤ã€‚
   æŸ¥çœ‹ [â€œtestbed createâ€æ–‡æ¡£][testbed create] è·å–æ›´å¤šè¯¦æƒ…ã€‚
   (ä¾‹å¦‚ï¼š`bencher testbed create`)
2. è®¾ç½® `--name` é€‰é¡¹ä¸ºæ‰€éœ€çš„ Testbed åç§°ã€‚
   (ä¾‹å¦‚ï¼š`--name ci-runner`)
3. æŒ‡å®šé¡¹ç›®å‚æ•°ä¸º `Save Walter White` é¡¹ç›®çš„ slugã€‚
   (ä¾‹å¦‚ï¼š`save-walter-white-1234abcd`)

ç›¸å¯¹è¿ç»­åŸºå‡†æµ‹è¯•é€šè¿‡å¯¹ä»£ç çš„ä¸¤ä¸ªç‰ˆæœ¬è¿›è¡Œå¹¶æ’æ¯”è¾ƒã€‚
è¿™åœ¨å¤„ç†èµ„æºåœ¨è¿è¡Œä¹‹é—´å¯èƒ½é«˜åº¦å˜åŒ–çš„å˜ˆæ‚ CI/CD ç¯å¢ƒæ—¶å¾ˆæœ‰ç”¨ã€‚
åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æ¯”è¾ƒåœ¨ `main` åˆ†æ”¯ä¸Šè¿è¡Œçš„ç»“æœä¸åœ¨åä¸º `feature-branch` çš„ç‰¹æ€§åˆ†æ”¯ä¸Šè¿è¡Œçš„ç»“æœã€‚
å› ä¸ºæ¯ä¸ªCIç¯å¢ƒéƒ½æœ‰äº›è®¸ä¸åŒï¼Œä»¥ä¸‹ç¤ºä¾‹æ„åœ¨è¯´æ˜è€Œéå®ç”¨ã€‚
æ›´å…·ä½“çš„ç¤ºä¾‹ï¼Œå‚è§[GitHub Actions ä¸­çš„è¿ç»­åŸºå‡†æµ‹è¯•][github actions]
å’Œ[GitLab CI/CD ä¸­çš„è¿ç»­åŸºå‡†æµ‹è¯•][gitlab ci/cd]ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ CI ä¸­ç”¨ `git` æ£€å‡º `main` åˆ†æ”¯ï¼š

<GitCheckoutMain />

ç„¶åæˆ‘ä»¬éœ€è¦åœ¨ CI ä¸­åœ¨ `main` åˆ†æ”¯ä¸Šè¿è¡Œæˆ‘ä»¬çš„åŸºå‡†æµ‹è¯•ï¼š

<RunMainRelative />

1. ä½¿ç”¨ <code><a href="/zh/docs/explanation/bencher-run/">bencher run</a></code> CLI å­å‘½ä»¤
   æ¥è¿è¡Œä½ çš„ `main` åˆ†æ”¯åŸºå‡†æµ‹è¯•ã€‚
   å‚è§ [â€œbencher runâ€ CLI å­å‘½ä»¤][bencher run] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
   (ä¾‹å¦‚ï¼š`bencher run`)
2. è®¾ç½® `--project` é€‰é¡¹ä¸ºé¡¹ç›® slugã€‚
   å‚è§ [â€œ--projectâ€ æ–‡æ¡£][project option] è·å–æ›´å¤šç»†èŠ‚ã€‚
   (ä¾‹å¦‚ï¼š`--project save-walter-white-1234abcd`)
3. è®¾ç½® `--branch` é€‰é¡¹ä¸ºç‰¹æ€§åˆ†æ”¯åç§°ã€‚
   å‚è§ [åˆ†æ”¯é€‰æ‹©][branch selection branch] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
   (ä¾‹å¦‚ï¼š`--branch feature-branch`)
4. è®¾ç½® `--branch-reset` æ ‡å¿—ã€‚
   å‚è§ [åˆ†æ”¯é€‰æ‹©][branch selection reset] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
   (ä¾‹å¦‚ï¼š`--branch-reset`)
5. è®¾ç½® `--testbed` é€‰é¡¹ä¸º Testbed åç§°ã€‚
   å‚è§ [â€œ--testedâ€ æ–‡æ¡£][testbed option] è·å–æ›´å¤šç»†èŠ‚ã€‚
   (ä¾‹å¦‚ï¼š`--testbed ci-runner`)
6. è®¾ç½® `--adapter` é€‰é¡¹ä¸ºæ‰€éœ€çš„åŸºå‡†æµ‹è¯•é€‚é…å™¨ã€‚
   å‚è§ [åŸºå‡†æµ‹è¯•é€‚é…å™¨][adapters] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
   (ä¾‹å¦‚ï¼š`--adapter json`)
7. æŒ‡å®šåŸºå‡†æµ‹è¯•å‘½ä»¤å‚æ•°ã€‚
    å‚è§ [åŸºå‡†æµ‹è¯•å‘½ä»¤][command argument] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
    (ä¾‹å¦‚ï¼š`bencher mock`)

è¿™ä¸ªå‘½ä»¤åœ¨ CI ä¸­é¦–æ¬¡è¿è¡Œæ—¶ï¼Œ
å°†ä¼šåˆ›å»º `feature-branch` åˆ†æ”¯ï¼Œå› ä¸ºå®ƒè¿˜ä¸å­˜åœ¨ã€‚
æ–°çš„ `feature-branch` ä¸ä¼šæœ‰èµ·ç‚¹ã€ç°æœ‰æ•°æ®æˆ–é˜ˆå€¼ã€‚
åœ¨åç»­è¿è¡Œä¸­ï¼Œæ—§çš„ `feature-branch` å°†è¢«é‡å‘½åï¼Œ
å¹¶åˆ›å»ºä¸€ä¸ªæ²¡æœ‰èµ·ç‚¹ã€ç°æœ‰æ•°æ®æˆ–é˜ˆå€¼çš„æ–° `feature-branch`ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ CI ä¸­ä¸ºæˆ‘ä»¬æ–°çš„ `feature-branch` åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„[é˜ˆå€¼][thresholds]ï¼š

<ThresholdCreateRelative />

1. ä½¿ç”¨ `bencher threshold create` CLI å­å‘½ä»¤ã€‚
   æŸ¥çœ‹ [â€œthreshold createâ€ æ–‡æ¡£][threshold create] ä»¥è·å¾—æ›´å¤šè¯¦æƒ…ã€‚
   (ä¾‹å¦‚ï¼š`bencher threshold create`)
2. è®¾ç½® `--branch` é€‰é¡¹ä¸ºæ–°çš„ `feature-branch` åˆ†æ”¯ã€‚
   (ä¾‹å¦‚ï¼š`--branch feature-branch`)
3. å°† `--branch` é€‰é¡¹è®¾ç½®ä¸º `ci-runner` Testbedã€‚
   (ä¾‹å¦‚ï¼š`--testbed ci-runner`)
4. è®¾ç½® `--measure` é€‰é¡¹ä¸º `bencher mock` ç”Ÿæˆçš„å†…ç½® `Latency` åº¦é‡ã€‚
   æŸ¥çœ‹ [åº¦é‡å®šä¹‰][measure] äº†è§£è¯¦æƒ…ã€‚
   (ä¾‹å¦‚ï¼š`--measure Latency`)
5. è®¾ç½® `--test` é€‰é¡¹ä¸ºä¸€ä¸ª `percentage` é˜ˆå€¼ã€‚
   å‚è§ [é˜ˆå€¼ & è­¦å‘Š][percentage] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
   (ä¾‹å¦‚ï¼š`--test t-test`)
6. è®¾ç½® `--upper-boundary` é€‰é¡¹ä¸º `0.25`ï¼ˆå³ `25%`ï¼‰çš„ä¸Šç•Œã€‚
   å‚è§ [é˜ˆå€¼ & è­¦å‘Š][percentage upper boundary] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
   (ä¾‹å¦‚ï¼š`--upper-boundary 0.25`)
7. æŒ‡å®šé¡¹ç›®å‚æ•°ä¸º `Save Walter White` é¡¹ç›® slugã€‚
   (ä¾‹å¦‚ï¼š`save-walter-white-1234abcd`)

ç„¶åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ CI ä¸­ç”¨ `git` æ£€å‡º `feature-branch` åˆ†æ”¯ï¼š

<GitCheckoutFeature />

æœ€åï¼Œæˆ‘ä»¬å‡†å¤‡åœ¨ CI ä¸­è¿è¡Œæˆ‘ä»¬çš„ `feature-branch` åŸºå‡†æµ‹è¯•ï¼š

<RunFeatureRelative />

1. ä½¿ç”¨ <code><a href="/zh/docs/explanation/bencher-run/">bencher run</a></code> CLI å­å‘½ä»¤
   æ¥è¿è¡Œä½ çš„ `feature-branch` åŸºå‡†æµ‹è¯•ã€‚
   å‚è§ [â€œbencher runâ€ CLI å­å‘½ä»¤][bencher run] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
   (ä¾‹å¦‚ï¼š`bencher run`)
2. è®¾ç½® `--project` é€‰é¡¹ä¸ºé¡¹ç›® slugã€‚
   å‚è§ [â€œ--projectâ€ æ–‡æ¡£][project option] è·å–æ›´å¤šç»†èŠ‚ã€‚
   (ä¾‹å¦‚ï¼š`--project save-walter-white-1234abcd`)
3. è®¾ç½® `--branch` é€‰é¡¹ä¸ºç‰¹æ€§åˆ†æ”¯åç§°ã€‚
   å‚è§ [åˆ†æ”¯é€‰æ‹©][branch selection branch] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
   (ä¾‹å¦‚ï¼š`--branch feature-branch`)
4. è®¾ç½® `--testbed` é€‰é¡¹ä¸º Testbed åç§°ã€‚
   å‚è§ [â€œ--testedâ€ æ–‡æ¡£][testbed option] è·å–æ›´å¤šç»†èŠ‚ã€‚
   (ä¾‹å¦‚ï¼š`--testbed ci-runner`)
5. è®¾ç½® `--adapter` é€‰é¡¹ä¸ºæ‰€éœ€çš„åŸºå‡†æµ‹è¯•é€‚é…å™¨ã€‚
   å‚è§ [åŸºå‡†æµ‹è¯•é€‚é…å™¨][adapters] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
   (ä¾‹å¦‚ï¼š`--adapter json`)
6. è®¾ç½® `--err` æ ‡å¿—ä»¥åœ¨ç”Ÿæˆè­¦å‘Šæ—¶å¤±è´¥å‘½ä»¤ã€‚
   å‚è§ [é˜ˆå€¼ & è­¦å‘Š][alerts] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
   (ä¾‹å¦‚ï¼š`--err`)
7. æŒ‡å®šåŸºå‡†æµ‹è¯•å‘½ä»¤å‚æ•°ã€‚
   å‚è§ [åŸºå‡†æµ‹è¯•å‘½ä»¤][command argument] ä»¥è·å¾—å®Œæ•´æ¦‚è§ˆã€‚
   (ä¾‹å¦‚ï¼š`bencher mock`)

æ¯æ¬¡åœ¨ CI ä¸­è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œ
å®ƒéƒ½ä»…å°† `feature-branch` çš„ç»“æœä¸ `main` çš„æœ€æ–°ç»“æœè¿›è¡Œæ¯”è¾ƒã€‚

[quick start]: /zh/docs/tutorial/quick-start/
[docker self-hosted]: /zh/docs/tutorial/docker/
[continuous benchmarking]: /zh/docs/explanation/continuous-benchmarking/
[create an api token]: /zh/docs/tutorial/quick-start/#create-an-api-token
[testbed create]: /zh/docs/api/projects/testbeds/#post-v0projectsprojecttestbeds
[github actions]: /zh/docs/how-to/github-actions/
[gitlab ci/cd]: /zh/docs/how-to/gitlab-ci-cd/
[bencher run]: /zh/docs/explanation/bencher-run/
[project option]: /zh/docs/explanation/bencher-run/#--project-project
[branch selection branch]: /zh/docs/explanation/branch-selection/#--branch-branch
[branch selection reset]: /zh/docs/explanation/branch-selection/#--branch-reset
[testbed option]: /zh/docs/explanation/bencher-run/#--testbed-testbed
[adapters]: /zh/docs/explanation/adapters/
[command argument]: /zh/docs/explanation/bencher-run/#benchmark-command
[thresholds]: /zh/docs/explanation/thresholds/
[threshold create]: /zh/docs/api/projects/thresholds/#post-v0projectsprojectthresholds
[measure]: /zh/docs/explanation/benchmarking/#measures
[percentage]: /zh/docs/explanation/thresholds/#percentage-thresholds
[percentage upper boundary]: /zh/docs/explanation/thresholds/#percentage-threshold-upper-boundary
[alerts]: /zh/docs/explanation/thresholds/#alerts