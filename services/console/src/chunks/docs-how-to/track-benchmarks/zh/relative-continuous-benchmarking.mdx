import GitCheckoutMain from "../git-checkout-main.mdx";
import RunMainRelative from "../run-main-relative.mdx";
import GitCheckoutFeature from "../git-checkout-feature.mdx";
import RunFeatureRelative from "../run-feature-relative.mdx";

## ç›¸å¯¹æŒç»­åŸºå‡†æµ‹è¯•

åœ¨[å¿«é€Ÿå¼€å§‹][quick start]å’Œ[Docker è‡ªæ‰˜ç®¡][docker self-hosted]æ•™ç¨‹ä¸­åˆ°æ­¤ä¸ºæ­¢ï¼Œè®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„`claimed`é¡¹ç›®æ·»åŠ ç›¸å¯¹[æŒç»­åŸºå‡†æµ‹è¯•][continuous benchmarking]ã€‚

> ğŸ° ç¡®ä¿æ‚¨å·²[åˆ›å»º API ä»¤ç‰Œå¹¶å°†å…¶è®¾ç½®ä¸º`BENCHER_API_TOKEN`ç¯å¢ƒå˜é‡][create an api token]åå†ç»§ç»­ï¼

[quick start]: /zh/docs/tutorial/quick-start/
[docker self-hosted]: /zh/docs/tutorial/docker/
[continuous benchmarking]: /zh/docs/explanation/continuous-benchmarking/
[create an api token]: /zh/docs/tutorial/quick-start/#create-an-api-token

ç›¸å¯¹æŒç»­åŸºå‡†æµ‹è¯•å¹¶æ’æ¯”è¾ƒä¸¤ç‰ˆä»£ç ã€‚è¿™åœ¨å¤„ç†å™ªå£°å¾ˆå¤§çš„ CI/CD ç¯å¢ƒæ—¶ä¼šå¾ˆæœ‰ç”¨ï¼Œåœ¨è¿™äº›ç¯å¢ƒä¸­ï¼Œå¯ç”¨èµ„æºåœ¨æ¯æ¬¡è¿è¡Œä¹‹é—´å¯èƒ½ä¼šæœ‰å¾ˆå¤§å·®å¼‚ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æ¯”è¾ƒåœ¨`main`åˆ†æ”¯ä¸Šè¿è¡Œçš„ç»“æœä¸åœ¨ç‰¹æ€§åˆ†æ”¯ä¸Šè¿è¡Œçš„ç»“æœï¼Œè¿™ä¸ªç‰¹æ€§åˆ†æ”¯è¢«è´´åˆ‡åœ°å‘½åä¸º`feature-branch`ã€‚ç”±äºæ¯ä¸ª CI ç¯å¢ƒéƒ½æœ‰æ‰€ä¸åŒï¼Œä»¥ä¸‹ç¤ºä¾‹æ—¨åœ¨è¯´æ˜è€Œéå®ç”¨ã€‚å¦‚éœ€æ›´å…·ä½“çš„ç¤ºä¾‹ï¼Œè¯·å‚é˜…[GitHub Actions ä¸­çš„æŒç»­åŸºå‡†æµ‹è¯•][github actions]ä»¥åŠ[GitLab CI/CD ä¸­çš„æŒç»­åŸºå‡†æµ‹è¯•][gitlab ci/cd]ã€‚

[github actions]: /zh/docs/how-to/github-actions/
[gitlab ci/cd]: /zh/docs/how-to/gitlab-ci-cd/

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ CI ä¸­ç”¨`git`æ£€å‡º`main`åˆ†æ”¯ï¼š

<GitCheckoutMain />

ç„¶åæˆ‘ä»¬éœ€è¦åœ¨ CI ä¸­è¿è¡Œæˆ‘ä»¬åœ¨`main`åˆ†æ”¯ä¸Šçš„åŸºå‡†æµ‹è¯•ï¼š

<RunMainRelative />

1. ä½¿ç”¨<code><a href="/zh/docs/explanation/bencher-run/">bencher run</a></code> CLI å­å‘½ä»¤è¿è¡Œæ‚¨çš„`main`åˆ†æ”¯åŸºå‡†æµ‹è¯•ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[`bencher run` CLI å­å‘½ä»¤][bencher run]ã€‚ï¼ˆä¾‹å¦‚ï¼š`bencher run`ï¼‰
2. å°†`--project`é€‰é¡¹è®¾ç½®ä¸ºé¡¹ç›®æ ‡è¯†ç¬¦ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[`--project`æ–‡æ¡£][project option]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--project project-abc4567-wxyz123456789`ï¼‰
3. å°†`--branch`é€‰é¡¹è®¾ç½®ä¸ºåŸºç¡€åˆ†æ”¯åç§°ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[`--branch`æ–‡æ¡£][branch option]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--branch main`ï¼‰
4. è®¾ç½®`--start-point-reset`æ ‡å¿—ä»¥å§‹ç»ˆé‡ç½®åŸºç¡€åˆ†æ”¯ã€‚è¿™å°†ç¡®ä¿æ‰€æœ‰åŸºå‡†æ•°æ®å‡æ¥è‡ªå½“å‰ CI è¿è¡Œå™¨ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[`--start-point-reset`æ–‡æ¡£][start point reset]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--start-point-reset`ï¼‰
5. å°†`--testbed`é€‰é¡¹è®¾ç½®ä¸º CI è¿è¡Œå™¨æµ‹è¯•å¹³å°åç§°ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[`--testbed`æ–‡æ¡£][testbed option]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--testbed ci-runner`ï¼‰
6. å°†`--adapter`é€‰é¡¹è®¾ç½®ä¸ºç”±<code><a href="/zh/docs/reference/bencher-metric-format/#bencher-mock">bencher mock</a></code>ç”Ÿæˆçš„[Bencher Metric Format JSONï¼ˆ`json`ï¼‰][bmf]ã€‚ æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[åŸºå‡†æµ‹è¯•é€‚é…å™¨][adapter json]ã€‚(ä¾‹å¦‚ï¼š`--adapter json`)
7. æŒ‡å®šåŸºå‡†å‘½ä»¤å‚æ•°ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[åŸºå‡†å‘½ä»¤][command argument]ã€‚ï¼ˆä¾‹å¦‚ï¼š`bencher mock`ï¼‰

åœ¨ CI ä¸­ç¬¬ä¸€æ¬¡è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œå°†åˆ›å»º`main`åˆ†æ”¯ï¼Œå› ä¸ºå®ƒå°šä¸å­˜åœ¨ã€‚æ–°åˆ›å»ºçš„`main`å°†æ²¡æœ‰èµ·å§‹ç‚¹ã€ç°æœ‰æ•°æ®æˆ–é˜ˆå€¼ã€‚åœ¨åç»­è¿è¡Œä¸­ï¼Œæ—§çš„`main` [Head][head] å°†è¢«æ›¿æ¢ï¼Œå¹¶åˆ›å»ºæ–°çš„`main` [Head][head]ï¼Œä¸å«èµ·å§‹ç‚¹ã€ç°æœ‰æ•°æ®æˆ–é˜ˆå€¼ã€‚

[bencher run]: /zh/docs/explanation/bencher-run/
[project option]: /zh/docs/explanation/bencher-run/#--project-project
[branch option]: /zh/docs/explanation/branch-selection/#--branch-branch
[start point reset]: /zh/docs/explanation/branch-selection/#--start-point-reset
[testbed option]: /zh/docs/explanation/bencher-run/#--testbed-testbed
[bmf]: /zh/docs/reference/bencher-metric-format/
[adapter json]: /zh/docs/explanation/adapters/#-json
[command argument]: /zh/docs/explanation/bencher-run/#benchmark-command
[head]: /zh/docs/explanation/benchmarking/#head

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ CI ä¸­ç”¨`git`æ£€å‡º`feature-branch`åˆ†æ”¯ï¼š

<GitCheckoutFeature />

æœ€åï¼Œæˆ‘ä»¬å‡†å¤‡åœ¨ CI ä¸­è¿è¡Œæˆ‘ä»¬çš„`feature-branch`åŸºå‡†æµ‹è¯•ï¼š

<RunFeatureRelative />

1. ä½¿ç”¨<code><a href="/zh/docs/explanation/bencher-run/">bencher run</a></code> CLI å­å‘½ä»¤è¿è¡Œæ‚¨çš„`feature-branch`åŸºå‡†æµ‹è¯•ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[`bencher run` CLI å­å‘½ä»¤][bencher run]ã€‚ï¼ˆä¾‹å¦‚ï¼š`bencher run`ï¼‰
2. å°†`--project`é€‰é¡¹è®¾ç½®ä¸ºé¡¹ç›®æ ‡è¯†ç¬¦ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[`--project`æ–‡æ¡£][project option]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--project project-abc4567-wxyz123456789`ï¼‰
3. å°†`--branch`é€‰é¡¹è®¾ç½®ä¸ºç‰¹æ€§åˆ†æ”¯åç§°ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[`--branch`æ–‡æ¡£][branch option]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--branch feature-branch`ï¼‰
4. è®¾ç½®`feature-branch`åˆ†æ”¯çš„èµ·å§‹ç‚¹ï¼š
   1. å°†`--start-point`é€‰é¡¹è®¾ç½®ä¸ºç‰¹æ€§åˆ†æ”¯èµ·å§‹ç‚¹ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[`--start-point`æ–‡æ¡£][start point]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--start-point main`ï¼‰
   2. è®¾ç½®`--start-point-reset`æ ‡å¿—ä»¥å§‹ç»ˆå°†åˆ†æ”¯é‡ç½®ä¸ºèµ·å§‹ç‚¹ã€‚è¿™å°†ä»…ä½¿ç”¨æœ€æ–°çš„ç›¸å¯¹åŸºå‡†ç»“æœã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[`--start-point-reset`æ–‡æ¡£][start point reset]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--start-point-reset`ï¼‰
5. å°†`--testbed`é€‰é¡¹è®¾ç½®ä¸º CI è¿è¡Œå™¨æµ‹è¯•å¹³å°åç§°ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[`--testbed`æ–‡æ¡£][testbed option]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--testbed ci-runner`ï¼‰
6. è®¾ç½®`feature-branch`åˆ†æ”¯ã€`ci-runner`æµ‹è¯•å¹³å°å’Œ`latency`æµ‹é‡çš„é˜ˆå€¼ï¼š
   1. å°†`--threshold-measure`é€‰é¡¹è®¾ç½®ä¸ºç”±<code><a href="/zh/docs/reference/bencher-metric-format/#bencher-mock">bencher mock</a></code>ç”Ÿæˆçš„å†…ç½®`latency`æµ‹é‡ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[`--threshold-measure`æ–‡æ¡£][threshold measure option]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--threshold-measure latency`ï¼‰
   2. å°†`--threshold-test`é€‰é¡¹è®¾ç½®ä¸ºåŸºæœ¬ç™¾åˆ†æ¯”(`percentage`)ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[`--threshold-test`æ–‡æ¡£][threshold test option]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--threshold-test percentage`ï¼‰
   3. å°†`--threshold-upper-boundary`é€‰é¡¹è®¾ç½®ä¸ºä¸Šé™`0.25`ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[`--threshold-upper-boundary`æ–‡æ¡£][threshold upper boundary]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--threshold-upper-boundary 0.25`ï¼‰
   4. è®¾ç½®`--thresholds-reset`æ ‡å¿—ï¼Œä»¥ä¾¿ä»…æ¿€æ´»æŒ‡å®šçš„é˜ˆå€¼ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[`--thresholds-reset`æ–‡æ¡£][thresholds reset]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--thresholds-reset`ï¼‰
7. è®¾ç½®`--err`æ ‡å¿—ä»¥ä¾¿åœ¨ç”Ÿæˆè­¦æŠ¥æ—¶å‘½ä»¤å¤±è´¥ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[`--err`æ–‡æ¡£][alert err]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--err`ï¼‰
8. å°†`--adapter`é€‰é¡¹è®¾ç½®ä¸ºç”±<code><a href="/zh/docs/reference/bencher-metric-format/#bencher-mock">bencher mock</a></code>ç”Ÿæˆçš„[Bencher Metric Format JSONï¼ˆ`json`ï¼‰][bmf]ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[åŸºå‡†æµ‹è¯•é€‚é…å™¨][adapter json]ã€‚ï¼ˆä¾‹å¦‚ï¼š`--adapter json`ï¼‰
9. æŒ‡å®šåŸºå‡†å‘½ä»¤å‚æ•°ã€‚æœ‰å…³å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚é˜…[åŸºå‡†å‘½ä»¤][command argument]ã€‚ï¼ˆä¾‹å¦‚ï¼š`bencher mock`ï¼‰

æ¯æ¬¡åœ¨ CI ä¸­è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œå®ƒéƒ½å°†`feature-branch`çš„ç»“æœä¸`main`çš„æœ€æ–°ç»“æœè¿›è¡Œæ¯”è¾ƒã€‚ç„¶åä½¿ç”¨æŒ‡å®šçš„é˜ˆå€¼æ£€æµ‹æ€§èƒ½å›å½’ã€‚

[start point]: /zh/docs/explanation/branch-selection/#--start-point-branch
[start point reset]: /zh/docs/explanation/branch-selection/#--start-point-reset
[threshold measure option]: /zh/docs/explanation/thresholds/#--threshold-measure-measure
[threshold test option]: /zh/docs/explanation/thresholds/#--threshold-test-test
[threshold upper boundary]: /zh/docs/explanation/thresholds/#--threshold-upper-boundary-boundary
[thresholds reset]: /zh/docs/explanation/thresholds/#--thresholds-reset
[alert err]: /zh/docs/explanation/thresholds/#--err