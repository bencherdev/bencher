---
title: "Seuils & Alertes"
description: "AperÃ§u de l'utilisation des seuils pour dÃ©tecter les rÃ©gressions de performances dans les benchmarks de code avec alertes"
heading: "Seuils & Alertes"
sortOrder: 4
---

Les seuils peuvent Ãªtre crÃ©Ã©s pour la combinaison unique d'un type de mÃ©trique, d'une branche et d'une plate-forme de test.
Ce sont des tests de signification statistique qui utilisent soit un
[score Z](https://fr.wikipedia.org/wiki/Cote_Z_(statistiques))
ou un [test de Student](https://fr.wikipedia.org/wiki/Test_de_Student)
afin de dÃ©tecter les rÃ©gressions de performance et de gÃ©nÃ©rer des alertes.
Lorsqu'une mÃ©trique est en dessous de la limite infÃ©rieure d'un seuil ou au-dessus de la limite supÃ©rieure d'un seuil,
une alerte est gÃ©nÃ©rÃ©e pour cette mÃ©trique.

Les seuils fonctionnent mieux lorsque :
- Il n'y a pas de diffÃ©rences extrÃªmes entre les exÃ©cutions de benchmark
- Les exÃ©cutions de benchmark sont totalement indÃ©pendantes les unes des autres
- Le nombre d'itÃ©rations pour une seule exÃ©cution de benchmark est infÃ©rieur Ã  10% des mÃ©triques historiques

S'il y a moins de 30 mÃ©triques historiques pour la combinaison de type de mÃ©trique, de branche et de plate-forme de test,
alors un seuil de test de Student devrait Ãªtre utilisÃ© et __*pas*__ un seuil de score Z.

<div class="content has-text-centered">
    <figure>
<img
    src="https://upload.wikimedia.org/wikipedia/commons/2/25/The_Normal_Distribution.svg"
    width="800"
    height="600"
    alt="La Distribution Normale https://commons.wikimedia.org/wiki/File:The_Normal_Distribution.svg"
/>
<br/>
<small>ğŸ° Pas de panique ! Tout cela aura du sens dans une minute.</small>
</figure>
</div>

## Test de Signification Statistique

### Score Z

Le score Z mesure le nombre d'[Ã©carts types](https://fr.wikipedia.org/wiki/Ã‰cart_type) (Ïƒ) qu'une mÃ©trique donnÃ©e est au-dessus ou en dessous de la moyenne des mÃ©triques historiques.
L'Ã©cart type (Ïƒ) peut Ã©galement Ãªtre exprimÃ© en un pourcentage cumulÃ© de borne _infÃ©rieure_ ou _supÃ©rieure_.

Par exemple, deux Ã©carts types (2Ïƒ) Ã©quivalent Ã  un pourcentage cumulÃ© de borne _supÃ©rieure_ de 97,7%, comme le montre l'image ci-dessus.
Lors de la crÃ©ation de score Z, la notation dÃ©cimale du pourcentage cumulÃ© est utilisÃ©e.
Dans cet exemple, le pourcentage cumulÃ© de borne _supÃ©rieure_ de 97,7% serait une borne supÃ©rieure de `0,977`.
En pratique, un seuil de ce type serait utile pour le type de mÃ©trique de latence.
C'est-Ã -dire qu'une valeur plus grande indiquerait une rÃ©gression des performances.

Lorsqu'une valeur plus petite indique une rÃ©gression de performance, comme avec le type de mÃ©trique de dÃ©bit,
un pourcentage cumulÃ© de borne _infÃ©rieure_ devrait Ãªtre utilisÃ©.
Un pourcentage cumulÃ© de borne _infÃ©rieure_ de 97,7% correspondrait Ã  deux Ã©carts types sous la moyenne (-2Ïƒ).
Ceci serait donnÃ© en notation dÃ©cimale comme une borne infÃ©rieure de `0,977`.

<br />

> ğŸ° Astuce: Lors de l'utilisation d'un seuil de score Z, fixez la taille minimale de l'Ã©chantillon Ã  au moins 30.

### Test de Student

Le test de Student mesure la probabilitÃ© qu'une mÃ©trique donnÃ©e soit au-dessus ou en dessous de la moyenne des mÃ©triques historiques.
Cette probabilitÃ© est appelÃ©e un intervalle de confiance (CI).
L'intervalle de confiance (CI) est exprimÃ© en un pourcentage de confiance de borne _infÃ©rieure_ ou _supÃ©rieure_.

Par exemple, un pourcentage de confiance de borne _supÃ©rieure_ de 95,0% indique que 95,0% des mÃ©triques devraient Ãªtre _infÃ©rieures_ Ã  un maximum attendu.
Lors de la crÃ©ation de seuils de test de Student, la notation dÃ©cimale du pourcentage de confiance est utilisÃ©e.
Dans cet exemple, le pourcentage de confiance de borne _supÃ©rieure_ de 95,0% serait une borne supÃ©rieure de `0,95`.
En pratique, un seuil de ce type serait utile pour le type de mÃ©trique de latence.
C'est-Ã -dire qu'une valeur plus grande indiquerait une rÃ©gression des performances.

Lorsqu'une valeur plus petite indiquerait une rÃ©gression des performances, comme avec le type de mÃ©trique de dÃ©bit,
un pourcentage de confiance de borne _infÃ©rieure_ devrait Ãªtre utilisÃ©.
Un pourcentage de confiance de borne _infÃ©rieure_ de 95,0% indiquerait que les MÃ©triques devraient Ãªtre _supÃ©rieures_ Ã  un minimum attendu.
Ceci serait donnÃ© en notation dÃ©cimale comme une limite infÃ©rieure de `0,95`.

<br />

> ğŸ° Astuce : Utilisez un seuil de test de Student si vous avez moins de 30 mÃ©triques historiques.

## Limite de Signification Statistique

La signification de la limite de signification statistique dÃ©pend du test de signification statistique :
- Score Z : Ã‰cart type (Ïƒ) exprimÃ© sous forme de pourcentage cumulÃ© dÃ©cimal
- Test de Student : Intervalle de confiance (CI) exprimÃ© sous forme de pourcentage de confiance dÃ©cimal

Chaque mÃ©trique est vÃ©rifiÃ©e par rapport Ã  la limite de signification statistique du seuil si elle existe.
Cela peut inclure une limite infÃ©rieure, une limite supÃ©rieure, ou les deux.
Une limite est calculÃ©e pour chaque borne.
Cette limite est ensuite comparÃ©e Ã  la mÃ©trique actuelle.
Si cette mÃ©trique tombe en dehors de la limite, une alerte sera gÃ©nÃ©rÃ©e.

> ğŸ° Astuce: Pour Ã©chouer une construction CI lorsqu'une borne est violÃ©e, utilisez le drapeau `--err` pour la sous-commande CLI <code><a href="/docs/fr/explanation/bencher-run/">bencher run</a></code>.

### Limite InfÃ©rieure
Une limite infÃ©rieure peut Ãªtre dÃ©finie pour un seuil.
Elle est utilisÃ©e lorsqu'une valeur plus petite indiquerait une rÃ©gression des performances,
comme avec le type de mÃ©trique de dÃ©bit.
La valeur doit Ãªtre un dÃ©cimal entre `0.5` et `1.0`.

Par exemple, si vous utilisiez un score Z et que vos mÃ©triques historiques avaient une moyenne de `100` et un Ã©cart type de `10`,
alors une limite infÃ©rieure de `0.977` crÃ©erait une limite infÃ©rieure Ã  `80.05`.
Toute valeur infÃ©rieure Ã  `80.05` gÃ©nÃ©rerait une alerte.

### Limite SupÃ©rieure
Une limite supÃ©rieure peut Ãªtre dÃ©finie pour un seuil.
Elle est utilisÃ©e lorsqu'une valeur plus grande indiquerait une rÃ©gression des performances,
comme avec le type de mÃ©trique de latence.
La valeur doit Ãªtre un dÃ©cimal entre `0.5` et `1.0`.

Par exemple, si vous utilisiez un score Z et que vos mÃ©triques historiques avaient une moyenne de `100` et un Ã©cart type de `10`,
alors une limite supÃ©rieure de `0.977` crÃ©erait une limite supÃ©rieure Ã  `119.95`.
Toute valeur supÃ©rieure Ã  `119.95` gÃ©nÃ©rerait une alerte.

## Taille de l'Ã‰chantillon

### Taille Minimale de l'Ã‰chantillon
Une taille minimale d'Ã©chantillon peut Ãªtre dÃ©finie pour un seuil.
Le seuil ne lancera son test de significativitÃ© statistique
que si le nombre de mÃ©triques historiques est supÃ©rieur ou Ã©gal Ã  la taille minimale de l'Ã©chantillon.

### Taille Maximale de l'Ã‰chantillon
Une taille maximale d'Ã©chantillon peut Ãªtre dÃ©finie pour un seuil.
Le seuil se limitera aux mÃ©triques historiques les plus rÃ©centes
plafonnÃ©es Ã  la taille maximale de l'Ã©chantillon pour son test de signification statistique.

## Taille de la FenÃªtre
Une taille de fenÃªtre en secondes peut Ãªtre dÃ©finie pour un seuil.
Le seuil se limitera aux mÃ©triques historiques les plus rÃ©centes
limitÃ©es par la fenÃªtre de temps donnÃ©e pour son test de signification statistique.

## Alertes
Des alertes sont gÃ©nÃ©rÃ©es lorsqu'une mÃ©trique est en dessous de la limite infÃ©rieure d'un seuil ou au-dessus de la limite supÃ©rieure d'un seuil.
Pour Ã©chouer une construction CI en cas d'alerte, rÃ©glez le drapeau `--err` lors de l'utilisation de la sous-commande CLI <code><a href="/docs/fr/explanation/bencher-run/">bencher run</a></code>.

### Suppression des Alertes
Il peut parfois Ãªtre utile de supprimer les alertes pour un benchmark particulier.
La meilleure faÃ§on de faire cela est d'ajouter l'un de ces suffixes spÃ©ciaux au nom de ce benchmark :

- `_bencher_ignore`
- `BencherIgnore`
- `-bencher-ignore`

Par exemple, si votre benchmark s'appelait `my_flaky_benchmark` alors le renommer en `my_flaky_benchmark_bencher_ignore`
ignorerait juste ce benchmark particulier Ã  l'avenir.
Les benchmarks ignorÃ©s ne sont pas vÃ©rifiÃ©s contre le seuil mÃªme si un existe.
Cependant, les mÃ©triques pour les benchmarks ignorÃ©s sont toujours stockÃ©es.
Pour continuer avec notre exemple, les rÃ©sultats de `my_flaky_benchmark_bencher_ignore` seraient toujours stockÃ©s dans la base de donnÃ©es sous `my_flaky_benchmark`.
Si vous retirez le suffixe et revenez au nom de base du benchmark,
alors les choses reprendront lÃ  oÃ¹ vous les avez laissÃ©es.

<br />
<br />

> ğŸ° Bravo! Vous avez tout appris sur les Seuils & Alertes! ğŸ‰

<br/>

<h2><a href="/docs/fr/explanation/continuous-benchmarking/">Continuer : Benchmarking Continu â¡</a></h2>
