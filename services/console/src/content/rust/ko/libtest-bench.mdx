---
title: "libtest bench"
description: "libtest ë²¤ì¹˜ë¥¼ ì‚¬ìš©í•˜ì—¬ Rust ì½”ë“œë¥¼ ë²¤ì¹˜ë§ˆí‚¹í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ë‹¨ê³„ë³„ ê°€ì´ë“œ"
heading: "libtest ë²¤ì¹˜ë¥¼ ì‚¬ìš©í•˜ì—¬ Rust ì½”ë“œ ë²¤ì¹˜ë§ˆí‚¹í•˜ê¸°"
published: "2023-10-18T10:28:00Z"
modified: "2024-02-13T06:50:00Z"
sortOrder: 1
---

import Benchmarking from "../../../chunks/benchmarking/ko/benchmarking.mdx";
import FizzBuzzRules from "../../../chunks/benchmarking/ko/fizz-buzz-rules.mdx";
import FizzBuzzRustCode from "../../../chunks/rust/fizz-buzz-rust-code.mdx";
import FizzBuzzRust from "../../../chunks/rust/ko/fizz-buzz-rust.mdx";
import StepByStepRust from "../../../chunks/rust/ko/step-by-step-rust.mdx";
import MicroVsMacro from "../../../chunks/benchmarking/ko/micro-vs-macro.mdx";
import BenchmarkingRust from "../../../chunks/rust/ko/benchmarking-rust.mdx";
import RustToolchainRustBenchCode from "../../../chunks/rust/bench/rust-toolchain-rust-bench-code.mdx";
import RustToolchainRustBenchTree from "../../../chunks/rust/bench/rust-toolchain-rust-bench-tree.mdx";
import FizzBuzzRefactorRust from "../../../chunks/rust/bench/ko/fizz-buzz-refactor-rust.mdx";
import TestCreateRustBenchCode from "../../../chunks/rust/bench/test-crate-rust-bench-code.mdx"
import BenchPlayGameRustBenchCode from "../../../chunks/rust/bench/bench-play-game-rust-bench-code.mdx";
import BenchPlayGameRustBenchOutput from "../../../chunks/rust/bench/bench-play-game-rust-bench-output.mdx";
import FizzBuzzFibonacciRust from "../../../chunks/rust/ko/fizz-buzz-fibonacci-rust.mdx";
import PlayGameRustCode from "../../../chunks/rust/bench/play-game-rust-code.mdx";
import BenchPlayGameFibonacciRustBenchOutput from "../../../chunks/rust/bench/bench-play-game-fibonacci-rust-bench-output.mdx";
import FizzBuzzFibonacciOpenRust from "../../../chunks/rust/ko/fizz-buzz-fibonacci-open-rust.mdx";
import FizzBuzzFibonacciOpenRustCode from "../../../chunks/rust/bench/fizz-buzz-fibonacci-open-rust-code.mdx";
import TheEnd from "../../../chunks/benchmarking/ko/the-end.mdx";
import OnFire from "../../../chunks/benchmarking/ko/on-fire.mdx";
import BenchPlayGameOnFireRustBenchCode from "../../../chunks/rust/bench/bench-play-game-on-fire-rust-bench-code.mdx";
import BenchPlayGameOnFireRustBenchOutputStart from "../../../chunks/rust/bench/bench-play-game-on-fire-rust-bench-output-start.mdx";
import BenchPlayGameOnFireRustBenchOutput from "../../../chunks/rust/bench/bench-play-game-on-fire-rust-bench-output.mdx";
import FizzBuzzFibonacciFixRust from "../../../chunks/rust/ko/fizz-buzz-fibonacci-fix-rust.mdx";
import BenchPlayGameFixRustBenchOutput from "../../../chunks/rust/bench/bench-play-game-fix-rust-bench-output.mdx";
import CatchInCi from "../../../chunks/benchmarking/ko/catch-in-ci.mdx";
import CatchInCiRustBenchOutput from "../../../chunks/rust/bench/catch-in-ci-rust-bench-output.mdx";
import CatchInCiPlot from "../../../chunks/benchmarking/ko/catch-in-ci-plot.mdx";
import CatchInCiPlotRustBench from "../../../chunks/rust/catch-in-ci-plot-rust-bench.mdx";
import BencherFooter from "../../../chunks/learn/ko/bencher-footer.mdx";

<Benchmarking />

<FizzBuzzRust />

<StepByStepRust />

<MicroVsMacro />

<BenchmarkingRust />

ì´ ì„¸ ê°€ì§€ëŠ” ëª¨ë‘ [Bencherê°€ ì§€ì›í•©ë‹ˆë‹¤](/ko/docs/explanation/adapters/). ê·¸ë ‡ë‹¤ë©´ ì™œ libtest benchë¥¼ ì„ íƒí•´ì•¼ í• ê¹Œìš”?
í”„ë¡œì íŠ¸ì˜ ì™¸ë¶€ ì¢…ì†ì„±ì„ ì œí•œí•˜ë ¤ê³  ì‹œë„í•˜ê³  í”„ë¡œì íŠ¸ê°€ ì´ë¯¸ `nightly` íˆ´ì²´ì¸ì„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²½ìš° ì¢‹ì€ ì„ íƒì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ ì™¸ì—ëŠ” ì‚¬ìš© ì‚¬ë¡€ì— ë”°ë¼ Criterion ë˜ëŠ” Iaië¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

### Rust `nightly` ì„¤ì¹˜

ì´ì œ ì¤€ë¹„ê°€ ë˜ì—ˆìœ¼ë‹ˆ, libtest benchë¥¼ ì‚¬ìš©í•  ê²ƒì´ë¯€ë¡œ ìš°ë¦¬ì˜ Rust íˆ´ì²´ì¸ì„ `nightly`ë¡œ ì„¤ì •í•©ì‹œë‹¤.
`game` í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ì— `Cargo.toml` ì˜†ì— `rust-toolchain.toml` íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.

<RustToolchainRustBenchCode />

ì´ì œ ë””ë ‰í† ë¦¬ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤:

<RustToolchainRustBenchTree />

ì™„ë£Œë˜ì—ˆë‹¤ë©´, ë‹¤ì‹œ `cargo run`ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
ìƒˆë¡­ê²Œ, `nightly` íˆ´ì²´ì¸ì´ ì„¤ì¹˜ë˜ê¸°ê¹Œì§€ ì¡°ê¸ˆ ì‹œê°„ì´ ê±¸ë¦´ ê²ƒì…ë‹ˆë‹¤
ì´ì „ê³¼ ê°™ì€ ì¶œë ¥ì„ ì œê³µí•˜ê¸° ì „ì— ë‹¤ì‹œ ì‹¤í–‰í•©ë‹ˆë‹¤.

<FizzBuzzRefactorRust />

## FizzBuzz ë²¤ì¹˜ë§ˆí‚¹

ë¶ˆì•ˆì •í•œ libtest crateë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì½”ë“œì— `test` ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ê³  `test` crateë¥¼ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤. ë‹¤ìŒì„ `main.rs`ì˜ _ë§¨ ìœ„_ì— ì¶”ê°€í•©ë‹ˆë‹¤:

<TestCreateRustBenchCode />

ì´ì œ ì²« ë²ˆì§¸ ë²¤ì¹˜ë§ˆí¬ë¥¼ ì¶”ê°€í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤!
ë‹¤ìŒì„ `main.rs`ì˜ _ë§¨ ì•„ë˜_ì— ì¶”ê°€í•©ë‹ˆë‹¤:

<BenchPlayGameRustBenchCode />

- 'benchmarks'ë¼ëŠ” ëª¨ë“ˆì„ ë§Œë“¤ê³ 
  [ì»´íŒŒì¼ëŸ¬ ì„¤ì •](https://doc.rust-lang.org/reference/conditional-compilation.html#the-cfg-attribute)
  ì„ [`test` mode](https://doc.rust-lang.org/book/ch11-03-test-organization.html#the-tests-module-and-cfgtest)ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
- ë²¤ì¹˜ë§ˆí¬ ëŸ¬ë„ˆ `Bencher`ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. (ğŸ° ë©‹ì§„ ì´ë¦„ì´ë„¤ìš”!)
- ìš°ë¦¬ì˜ `play_game` í•¨ìˆ˜ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
- `Bencher`ì— ëŒ€í•œ ë³€ê²½ ê°€ëŠ¥í•œ ì°¸ì¡°ë¥¼ ê°€ì ¸ì˜¤ëŠ” `bench_play_game`ì´ë¼ëŠ” ë²¤ì¹˜ë§ˆí¬ë¥¼ ë§Œë“­ë‹ˆë‹¤.
- `#[bench]` íŠ¹ì„±ì„ ì„¤ì •í•˜ì—¬ `bench_play_game`ì´ ë²¤ì¹˜ë§ˆí¬ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- `Bencher` ì¸ìŠ¤í„´ìŠ¤ (`b`)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš°ë¦¬ì˜ ë§¤í¬ë¡œ ë²¤ì¹˜ë§ˆí¬ë¥¼ ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰í•©ë‹ˆë‹¤.
- ì»´íŒŒì¼ëŸ¬ê°€ ìš°ë¦¬ì˜ ì½”ë“œë¥¼ ìµœì í™”í•˜ì§€ ì•Šë„ë¡ "ë¸”ë™ ë°•ìŠ¤" ë‚´ì—ì„œ ìš°ë¦¬ì˜ ë§¤í¬ë¡œ ë²¤ì¹˜ë§ˆí¬ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
- `1`ì—ì„œ `100`ê¹Œì§€ í¬í•¨í•˜ì—¬ ë°˜ë³µí•©ë‹ˆë‹¤.
- ê° ë²ˆí˜¸ì— ëŒ€í•´ `play_game`ì„ í˜¸ì¶œí•©ë‹ˆë‹¤.

ì´ì œ ì½”ë“œ ë²¤ì¹˜ë§ˆí‚¹ì„ ì¤€ë¹„í–ˆìœ¼ë‹ˆ, `cargo bench`ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤:

<BenchPlayGameRustBenchOutput />

> ğŸ° Lettuce turnip the beet! ìš°ë¦¬ëŠ” ì²« ë²ˆì§¸ ë²¤ì¹˜ë§ˆí¬ ë©”íŠ¸ë¦­ì„ ì–»ì—ˆìŠµë‹ˆë‹¤!

ë“œë””ì–´ ìš°ë¦¬ëŠ” í”¼ê³¤í•œ ê°œë°œì ë¨¸ë¦¬ë¥¼ ì‰´ ìˆ˜ ìˆìŠµë‹ˆë‹¤...
ê·¸ëƒ¥ ì¥ë‚œì´ì—ìš”, ì‚¬ìš©ìë“¤ì´ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì›í•©ë‹ˆë‹¤!

<FizzBuzzFibonacciRust>
  <PlayGameRustCode />
</FizzBuzzFibonacciRust>

## FizzBuzzFibonacci ë²¤ì¹˜ë§ˆí‚¹

ì´ì œ ë²¤ì¹˜ë§ˆí¬ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

<BenchPlayGameFibonacciRustBenchOutput />

í„°ë¯¸ë„ ê¸°ë¡ì„ ë’¤ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬,
ìš°ë¦¬ì˜ FizzBuzzì™€ FizzBuzzFibonacci ê²Œì„ì˜ ì„±ëŠ¥ ì‚¬ì´ì˜ ì°¨ì´ë¥¼ ëˆˆìœ¼ë¡œ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: `4,879 ns` ëŒ€ `22,167 ns`.
ë‹¹ì‹ ì˜ ìˆ«ìëŠ” ë‚˜ì˜ ê²ƒê³¼ ì•½ê°„ ë‹¤ë¥¼ ê²ƒì…ë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ ë‘ ê²Œì„ ì‚¬ì´ì˜ ì°¨ì´ëŠ” ì•„ë§ˆë„ 5ë°° ë²”ìœ„ì¼ ê²ƒì…ë‹ˆë‹¤.
ê·¸ê²ƒì€ ë‚˜ì—ê²Œ ì¢‹ì•„ ë³´ì…ë‹ˆë‹¤! íŠ¹íˆ _Fibonacci_ì™€ ê°™ì€ ë©‹ì§„ ì†Œë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ ìš°ë¦¬ ê²Œì„ì— ì¶”ê°€í•˜ëŠ” ê²ƒì— ëŒ€í•´.
ì•„ì´ë“¤ì´ ê·¸ê²ƒì„ ì‚¬ë‘í•  ê²ƒì…ë‹ˆë‹¤!

<FizzBuzzFibonacciOpenRust>
  <FizzBuzzFibonacciOpenRustCode />
</FizzBuzzFibonacciOpenRust>

<TheEnd />

<br />

<OnFire />

<BenchPlayGameOnFireRustBenchCode />

- ìˆ«ì í•œ ë°± (`100`)ìœ¼ë¡œ ê²Œì„ì„ í•˜ëŠ” ë§ˆì´í¬ë¡œ ë²¤ì¹˜ë§ˆí¬ `bench_play_game_100`
- ìˆ«ì ë°±ë§Œ (`1_000_000`)ìœ¼ë¡œ ê²Œì„ì„ í•˜ëŠ” ë§ˆì´í¬ë¡œ ë²¤ì¹˜ë§ˆí¬ `bench_play_game_1_000_000`

ë‚´ê°€ ì‹¤í–‰í•˜ë©´ ì´ë ‡ê²Œ ë‚˜ì˜µë‹ˆë‹¤:

<BenchPlayGameOnFireRustBenchOutputStart />

ê¸°ë‹¤ë ¤ë´…ì‹œë‹¤... ê¸°ë‹¤ë ¤ë´…ì‹œë‹¤...

<BenchPlayGameOnFireRustBenchOutput />

ë­ì•¼! `439 ns` x `1,000`ì€ `439,000 ns`ì´ì•¼, `9,586,977 ns`ê°€ ì•„ë‹ˆì•¼ ğŸ¤¯
Fibonacci sequence ì½”ë“œê°€ ê¸°ëŠ¥ì ìœ¼ë¡œëŠ” ì˜ ëŒì•„ê°€ì§€ë§Œ, ì–´ë”˜ê°€ì— ì„±ëŠ¥ ë²„ê·¸ê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

<FizzBuzzFibonacciFixRust />

ì´ì œ ë²¤ì¹˜ë§ˆí¬ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ê³  ì–´ë–»ê²Œ í–ˆëŠ”ì§€ ë´…ì‹œë‹¤:

<BenchPlayGameFixRustBenchOutput />

ì˜¤, ì™€! ìš°ë¦¬ì˜ `bench_play_game` ë²¤ì¹˜ë§ˆí¬ê°€ ì›ë˜ FizzBuzzì˜ ì ìˆ˜ ì£¼ë³€ìœ¼ë¡œ ë‹¤ì‹œ ë‚´ë ¤ì™”ìŠµë‹ˆë‹¤.
ë‚´ê°€ ê·¸ ì ìˆ˜ê°€ ì •í™•íˆ ì–¼ë§ˆì˜€ëŠ”ì§€ ê¸°ì–µí•  ìˆ˜ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ì–´. ê·¸ëŸ¬ë‚˜ ì´ë¯¸ 3ì£¼ê°€ ì§€ë‚¬ì–´.
ë‚´ í„°ë¯¸ë„ ê¸°ë¡ì€ ê·¸ë ‡ê²Œ ë©€ë¦¬ ëŒì•„ê°€ì§€ ì•Šì•„.
í•˜ì§€ë§Œ ê°€ê¹ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤!

`bench_play_game_100` ë²¤ì¹˜ë§ˆí¬ëŠ” ê±°ì˜ 10ë°° ê°€ëŸ‰ ë‚´ë ¤ê°”ìŠµë‹ˆë‹¤. `439 ns`ì—ì„œ `46 ns`ë¡œ.
ê·¸ë¦¬ê³  `bench_play_game_1_000_000` ë²¤ì¹˜ë§ˆí¬ëŠ” 10,000ë°° ì´ìƒ ë‚´ë ¤ê°”ìŠµë‹ˆë‹¤! `9,586,977 ns`ì—ì„œ `53 ns`ë¡œ!

> ğŸ° í—¤, ì ì–´ë„ ìš°ë¦¬ëŠ” ì´ ì„±ëŠ¥ ë²„ê·¸ë¥¼ ìƒì‚° í™˜ê²½ì— ë„ë‹¬í•˜ê¸° ì „ì— ì¡ì•„ëƒˆë„¤... ì•„, ë§ë‹¤. ë­..

<CatchInCi />

<CatchInCiRustBenchOutput />

<CatchInCiPlot />

<CatchInCiPlotRustBench title="libtest benchë¡œ Rust ë²¤ì¹˜ë§ˆí‚¹í•˜ëŠ” ë°©ë²•" />

<BencherFooter />
