import RunMainStatistical from "../run-main-statistical.mdx";
import RunFeatureStatistical from "../run-feature-statistical.mdx";

## ç»Ÿè®¡è¿ç»­åŸºå‡†æµ‹è¯•

ä»æˆ‘ä»¬åœ¨[å¿«é€Ÿå¼€å§‹][quick start]å’Œ[Docker è‡ªæ‰˜ç®¡][docker self-hosted]æ•™ç¨‹ä¸­ç¦»å¼€çš„åœ°æ–¹ç»§ç»­ï¼Œ
è®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„`claimed`é¡¹ç›®æ·»åŠ ç»Ÿè®¡[è¿ç»­åŸºå‡†æµ‹è¯•][continuous benchmarking]ã€‚

> ğŸ° è¯·ç¡®ä¿æ‚¨å·²ç»
> [åˆ›å»ºäº†ä¸€ä¸ª API ä»¤ç‰Œå¹¶å°†å…¶è®¾ç½®ä¸º `BENCHER_API_TOKEN` ç¯å¢ƒå˜é‡][create an api token]
> ç„¶åå†ç»§ç»­ï¼

[quick start]: /zh/docs/tutorial/quick-start/
[docker self-hosted]: /zh/docs/tutorial/docker/
[continuous benchmarking]: /zh/docs/explanation/continuous-benchmarking/
[create an api token]: /zh/docs/how-to/claim/#create-an-api-token

ç°åœ¨æˆ‘ä»¬å‡†å¤‡åœ¨ CI ä¸­è¿è¡Œæˆ‘ä»¬çš„åŸºå‡†æµ‹è¯•ã€‚
å› ä¸ºæ¯ä¸ª CI ç¯å¢ƒéƒ½æœ‰äº›ä¸åŒï¼Œ
ä»¥ä¸‹ç¤ºä¾‹æ—¨åœ¨è¯´æ˜è€Œéå®ç”¨ã€‚
æœ‰å…³æ›´å…·ä½“çš„ç¤ºä¾‹ï¼Œè¯·å‚è§[åœ¨ GitHub Actions ä¸­çš„è¿ç»­åŸºå‡†æµ‹è¯•][github actions]
å’Œ[åœ¨ GitLab CI/CD ä¸­çš„è¿ç»­åŸºå‡†æµ‹è¯•][gitlab ci/cd]ã€‚

[github actions]: /zh/docs/how-to/github-actions/
[gitlab ci/cd]: /zh/docs/how-to/gitlab-ci-cd/

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡åœ¨ CI ä¸­ä¸ºæ¯æ¬¡æ›´æ”¹è¿›è¡ŒåŸºå‡†æµ‹è¯•æ¥åˆ›å»ºå’Œç»´æŠ¤æˆ‘ä»¬`main`åˆ†æ”¯çš„å†å²åŸºçº¿ï¼š

<RunMainStatistical />

1. ä½¿ç”¨<code><a href="/zh/docs/explanation/bencher-run/">bencher run</a></code> CLI å­å‘½ä»¤
   è¿è¡Œæ‚¨çš„`main`åˆ†æ”¯åŸºå‡†æµ‹è¯•ã€‚
   æŸ¥çœ‹[`bencher run` CLI å­å‘½ä»¤][bencher run]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`bencher run`ï¼‰
2. è®¾ç½®`--project`é€‰é¡¹ä¸ºé¡¹ç›® slugã€‚
   æŸ¥çœ‹[æœ‰å…³`--project`çš„æ–‡æ¡£][project option]ä»¥è·å–æ›´å¤šè¯¦æƒ…ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--project project-abc4567-wxyz123456789`ï¼‰
3. è®¾ç½®`--branch`é€‰é¡¹ä¸ºåŸºç¡€åˆ†æ”¯åç§°ã€‚
   æŸ¥çœ‹[æœ‰å…³`--branch`çš„æ–‡æ¡£][branch option]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--branch main`ï¼‰
4. è®¾ç½®`--testbed`é€‰é¡¹ä¸º CI è¿è¡Œå™¨æµ‹è¯•å°åç§°ã€‚
   æŸ¥çœ‹[æœ‰å…³`--testbed`çš„æ–‡æ¡£][testbed option]ä»¥è·å–æ›´å¤šè¯¦æƒ…ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--testbed ci-runner`ï¼‰
5. ä¸º`main`åˆ†æ”¯ã€`ci-runner`æµ‹è¯•å°å’Œ`latency`æµ‹é‡è®¾ç½®é˜ˆå€¼ï¼š
   1. å°†`--threshold-measure`é€‰é¡¹è®¾ç½®ä¸ºç”±<code><a href="/zh/docs/reference/bencher-metric-format/#bencher-mock">bencher mock</a></code>ç”Ÿæˆçš„å†…ç½®`latency`æµ‹é‡ã€‚
   æŸ¥çœ‹[å…³äº`--threshold-measure`çš„æ–‡æ¡£][threshold measure option]ä»¥è·å–æ›´å¤šè¯¦æƒ…ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--threshold-measure latency`ï¼‰
   2. å°†`--threshold-test`é€‰é¡¹è®¾ç½®ä¸ºå­¦ç”Ÿ t æ£€éªŒï¼ˆ`t_test`ï¼‰ã€‚
   æŸ¥çœ‹[å…³äº`--threshold-test`çš„æ–‡æ¡£][threshold test option]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--threshold-test t_test`ï¼‰
   3. è®¾ç½®`--threshold-max-sample-size`é€‰é¡¹ä¸ºæœ€å¤§æ ·æœ¬å¤§å°`64`ã€‚
   æŸ¥çœ‹[å…³äº`--threshold-max-sample-size`çš„æ–‡æ¡£][threshold max sample size]ä»¥è·å–æ›´å¤šè¯¦æƒ…ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--threshold-max-sample-size 64`ï¼‰
   4. è®¾ç½®`--threshold-upper-boundary`é€‰é¡¹ä¸ºä¸Šé™`0.99`ã€‚
   æŸ¥çœ‹[å…³äº`--threshold-upper-boundary`çš„æ–‡æ¡£][threshold upper boundary]ä»¥è·å–æ›´å¤šè¯¦æƒ…ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--threshold-upper-boundary 0.99`ï¼‰
   5. è®¾ç½®`--thresholds-reset`æ ‡å¿—ä»¥ä»…æ¿€æ´»æŒ‡å®šçš„é˜ˆå€¼ã€‚
   æŸ¥çœ‹[å…³äº`--thresholds-reset`çš„æ–‡æ¡£][thresholds reset]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--thresholds-reset`ï¼‰
6. è®¾ç½®`--err`æ ‡å¿—ä»¥åœ¨ç”Ÿæˆè­¦æŠ¥æ—¶è®©å‘½ä»¤å¤±è´¥ã€‚
   æŸ¥çœ‹[å…³äº`--err`çš„æ–‡æ¡£][alert err]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--err`ï¼‰
7. è®¾ç½®`--adapter`é€‰é¡¹ä¸ºç”±<code><a href="/zh/docs/reference/bencher-metric-format/#bencher-mock">bencher mock</a></code>ç”Ÿæˆçš„[Bencher Metric Format JSONï¼ˆ`json`ï¼‰][bmf]ã€‚
   æŸ¥çœ‹[åŸºå‡†æµ‹è¯•å·¥å…·é€‚é…å™¨][adapter json]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--adapter json`ï¼‰
8. æŒ‡å®šåŸºå‡†æµ‹è¯•å‘½ä»¤å‚æ•°ã€‚
   æŸ¥çœ‹[åŸºå‡†æµ‹è¯•å‘½ä»¤][command argument]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`bencher mock`ï¼‰

ç¬¬ä¸€æ¬¡åœ¨ CI ä¸­è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œ
å¦‚æœ`main`åˆ†æ”¯å°šä¸å­˜åœ¨ï¼Œå®ƒå°†è¢«åˆ›å»ºã€‚
æ–°çš„`main`å°†_ä¸ä¼š_æœ‰èµ·å§‹ç‚¹æˆ–ç°æœ‰æ•°æ®ã€‚
å°†ä¸º`main`åˆ†æ”¯ã€`ci-runner`æµ‹è¯•å°å’Œ`latency`æµ‹é‡åˆ›å»ºä¸€ä¸ªé˜ˆå€¼ã€‚
åœ¨åç»­è¿è¡Œä¸­ï¼Œæ–°æ•°æ®å°†æ·»åŠ åˆ°`main`åˆ†æ”¯ä¸­ã€‚
ç„¶åå°†ä½¿ç”¨æŒ‡å®šçš„é˜ˆå€¼æ¥æ£€æµ‹æ€§èƒ½å›å½’ã€‚

[bencher run]: /zh/docs/explanation/bencher-run/
[project option]: /zh/docs/explanation/bencher-run/#--project-project
[branch option]: /zh/docs/explanation/branch-selection/#--branch-branch
[testbed option]: /zh/docs/explanation/bencher-run/#--testbed-testbed
[threshold measure option]: /zh/docs/explanation/thresholds/#--threshold-measure-measure
[threshold test option]: /zh/docs/explanation/thresholds/#--threshold-test-test
[threshold max sample size]: /zh/docs/explanation/thresholds/#--threshold-max-sample-size-size
[threshold upper boundary]: /zh/docs/explanation/thresholds/#--threshold-upper-boundary-boundary
[thresholds reset]: /zh/docs/explanation/thresholds/#--thresholds-reset
[alert err]: /zh/docs/explanation/thresholds/#--err
[bmf]: /zh/docs/reference/bencher-metric-format/
[adapter json]: /zh/docs/explanation/adapters/#-json
[command argument]: /zh/docs/explanation/bencher-run/#benchmark-command

ç°åœ¨ï¼Œæˆ‘ä»¬å‡†å¤‡åœ¨ CI ä¸­æ•è·æ€§èƒ½å›å½’ã€‚
è¿™æ˜¯æˆ‘ä»¬å°†åœ¨ CI ä¸­è·Ÿè¸ªæ–°åŠŸèƒ½åˆ†æ”¯æ€§èƒ½çš„æ–¹æ³•ï¼Œæ°å¦‚å…¶åä¸º`feature-branch`ï¼š

<RunFeatureStatistical />

1. ä½¿ç”¨<code><a href="/zh/docs/explanation/bencher-run/">bencher run</a></code> CLI å­å‘½ä»¤
   è¿è¡Œæ‚¨çš„`feature-branch`åˆ†æ”¯åŸºå‡†æµ‹è¯•ã€‚
   æŸ¥çœ‹[`bencher run` CLI å­å‘½ä»¤][bencher run]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`bencher run`ï¼‰
2. è®¾ç½®`--project`é€‰é¡¹ä¸ºé¡¹ç›® slugã€‚
   æŸ¥çœ‹[æœ‰å…³`--project`çš„æ–‡æ¡£][project option]ä»¥è·å–æ›´å¤šè¯¦æƒ…ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--project project-abc4567-wxyz123456789`ï¼‰
3. è®¾ç½®`--branch`é€‰é¡¹ä¸ºåŠŸèƒ½åˆ†æ”¯åç§°ã€‚
   æŸ¥çœ‹[æœ‰å…³`--branch`çš„æ–‡æ¡£][branch option]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--branch feature-branch`ï¼‰
4. ä¸º`feature-branch`åˆ†æ”¯è®¾ç½®èµ·å§‹ç‚¹ï¼š
   1. å°†`--start-point`é€‰é¡¹è®¾ç½®ä¸ºåŠŸèƒ½åˆ†æ”¯çš„èµ·å§‹ç‚¹ã€‚
   æŸ¥çœ‹[æœ‰å…³`--start-point`çš„æ–‡æ¡£][start point]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--start-point main`ï¼‰
   2. è®¾ç½®`--start-point-hash`é€‰é¡¹ä¸ºåŠŸèƒ½åˆ†æ”¯èµ·å§‹ç‚¹çš„`git`å“ˆå¸Œã€‚
   æŸ¥çœ‹[æœ‰å…³`--start-point-hash`çš„æ–‡æ¡£][start point hash]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--start-point-hash 32ae...dd8b`ï¼‰
   3. è®¾ç½®`--start-point-clone-thresholds`æ ‡å¿—ä»¥ä»èµ·å§‹ç‚¹å…‹éš†é˜ˆå€¼ã€‚
   æŸ¥çœ‹[æœ‰å…³`--start-point-clone-thresholds`çš„æ–‡æ¡£][start point clone thresholds]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--start-point-clone-thresholds`ï¼‰
   4. è®¾ç½®`--start-point-reset`æ ‡å¿—ä»¥å§‹ç»ˆå°†åˆ†æ”¯é‡ç½®ä¸ºèµ·å§‹ç‚¹ã€‚
   è¿™å°†é˜²æ­¢åŸºå‡†æµ‹è¯•æ•°æ®æ¼‚ç§»ã€‚
   æŸ¥çœ‹[æœ‰å…³`--start-point-reset`çš„æ–‡æ¡£][start point reset]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--start-point-reset`ï¼‰
5. å°†`--testbed`é€‰é¡¹è®¾ç½®ä¸ºæµ‹è¯•å°åç§°ã€‚
   æŸ¥çœ‹[æœ‰å…³`--tested`çš„æ–‡æ¡£][testbed option]ä»¥è·å–æ›´å¤šè¯¦æƒ…ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--testbed ci-runner`ï¼‰
6. è®¾ç½®`--err`æ ‡å¿—ä»¥åœ¨ç”Ÿæˆè­¦æŠ¥æ—¶è®©å‘½ä»¤å¤±è´¥ã€‚
   æŸ¥çœ‹[å…³äº`--err`çš„æ–‡æ¡£][alert err]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--err`ï¼‰
7. è®¾ç½®`--adapter`é€‰é¡¹ä¸ºç”±<code><a href="/zh/docs/reference/bencher-metric-format/#bencher-mock">bencher mock</a></code>ç”Ÿæˆçš„[Bencher Metric Format JSONï¼ˆ`json`ï¼‰][bmf]ã€‚
   æŸ¥çœ‹[åŸºå‡†æµ‹è¯•å·¥å…·é€‚é…å™¨][adapter json]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`--adapter json`ï¼‰
8. æŒ‡å®šåŸºå‡†æµ‹è¯•å‘½ä»¤å‚æ•°ã€‚
   æŸ¥çœ‹[åŸºå‡†æµ‹è¯•å‘½ä»¤][command argument]ä»¥è·å–å®Œæ•´æ¦‚è¿°ã€‚
   ï¼ˆä¾‹å¦‚ï¼š`bencher mock`ï¼‰

ç¬¬ä¸€æ¬¡åœ¨ CI ä¸­è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œ
Bencher å°†åˆ›å»º`feature-branch`åˆ†æ”¯ï¼Œå› ä¸ºå®ƒå°šä¸å­˜åœ¨ã€‚
æ–°çš„`feature-branch`å°†ä½¿ç”¨`main`åˆ†æ”¯
åœ¨å“ˆå¸Œ`32aea434d751648726097ed3ac760b57107edd8b`ä½œä¸ºå…¶èµ·å§‹ç‚¹ã€‚
è¿™æ„å‘³ç€`feature-branch`å°†å…·æœ‰`main`åˆ†æ”¯çš„æ‰€æœ‰æ•°æ®å’Œ[é˜ˆå€¼][thresholds]çš„å‰¯æœ¬ï¼Œä»¥ä¾¿å°†`bencher mock`çš„ç»“æœè¿›è¡Œæ¯”è¾ƒã€‚
åœ¨æ‰€æœ‰åç»­è¿è¡Œä¸­ï¼ŒBencher å°†é‡ç½®`feature-branch`åˆ†æ”¯ä¸ºèµ·å§‹ç‚¹ï¼Œ
å¹¶ä½¿ç”¨`main`åˆ†æ”¯æ•°æ®å’Œé˜ˆå€¼æ¥æ£€æµ‹æ€§èƒ½å›å½’ã€‚

[start point]: /zh/docs/explanation/branch-selection/#--start-point-branch
[start point hash]: /zh/docs/explanation/branch-selection/#--start-point-hash-hash
[start point clone thresholds]: /zh/docs/explanation/branch-selection/#--start-point-clone-thresholds
[start point reset]: /zh/docs/explanation/branch-selection/#--start-point-reset
[thresholds]: /zh/docs/explanation/thresholds/